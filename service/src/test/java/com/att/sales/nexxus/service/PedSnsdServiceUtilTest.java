package com.att.sales.nexxus.service;

import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.any;
import static org.mockito.Mockito.anyInt;
import static org.mockito.Mockito.anyList;
import static org.mockito.Mockito.anyLong;
import static org.mockito.Mockito.anyMap;
import static org.mockito.Mockito.anyString;
import static org.mockito.Mockito.doAnswer;
import static org.mockito.Mockito.doNothing;

import java.io.IOException;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import org.junit.Before;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.extension.ExtendWith;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.junit.MockitoJUnitRunner;
import org.mockito.junit.jupiter.MockitoExtension;
import org.mockito.stubbing.Answer;

import com.att.sales.nexxus.constant.CommonConstants;
import com.att.sales.nexxus.constant.MyPriceConstants;
import com.att.sales.nexxus.constant.StringConstants;
import com.att.sales.nexxus.dao.model.NxDesign;
import com.att.sales.nexxus.dao.model.NxDesignAudit;
import com.att.sales.nexxus.dao.model.NxDesignDetails;
import com.att.sales.nexxus.dao.model.NxLookupData;
import com.att.sales.nexxus.dao.model.NxMpDeal;
import com.att.sales.nexxus.dao.model.NxMpDesignDocument;
import com.att.sales.nexxus.dao.model.solution.NxSolutionDetail;
import com.att.sales.nexxus.dao.repository.NxDesignAuditRepository;
import com.att.sales.nexxus.dao.repository.NxDesignDetailsRepository;
import com.att.sales.nexxus.dao.repository.NxDesignRepository;
import com.att.sales.nexxus.dao.repository.NxLookupDataRepository;
import com.att.sales.nexxus.dao.repository.NxMpDealRepository;
import com.att.sales.nexxus.dao.repository.NxMpDesignDocumentRepository;
import com.att.sales.nexxus.dao.repository.SalesMsDao;
import com.att.sales.nexxus.myprice.transaction.dao.service.NxMpRepositoryService;
import com.att.sales.nexxus.myprice.transaction.model.CreateTransactionResponse;
import com.att.sales.nexxus.myprice.transaction.service.ConfigAndUpdatePricingUtil;
import com.att.sales.nexxus.myprice.transaction.service.ConfigAndUpdateRestUtilPd;
import com.att.sales.nexxus.myprice.transaction.service.MyPriceTransactionUtil;
import com.att.sales.nexxus.myprice.transaction.service.RestCommonUtil;
import com.att.sales.nexxus.reteriveicb.model.ActionDeterminants;
import com.att.sales.nexxus.reteriveicb.model.Circuit;
import com.att.sales.nexxus.reteriveicb.model.Component;
import com.att.sales.nexxus.reteriveicb.model.Offer;
import com.att.sales.nexxus.reteriveicb.model.Port;
import com.att.sales.nexxus.reteriveicb.model.References;
import com.att.sales.nexxus.reteriveicb.model.RetreiveICBPSPRequest;
import com.att.sales.nexxus.reteriveicb.model.Site;
import com.att.sales.nexxus.reteriveicb.model.Solution;
import com.att.sales.nexxus.reteriveicb.model.UDFBaseData;
import com.att.sales.nexxus.util.JsonPathUtil;
import com.att.sales.nexxus.util.NexxusJsonUtility;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;

@ExtendWith(MockitoExtension.class)
public class PedSnsdServiceUtilTest {

	@InjectMocks
	PedSnsdServiceUtil pedSnsdServiceUtilTest;
	
	ObjectMapper realMapper = new ObjectMapper();
	
	@Mock
	ObjectMapper mapper;
	
	@Mock
	SalesMsDao salesMsDao;
	
	@Mock
	NxDesignRepository nxDesignRepository;
	
	@Mock
	NxMpRepositoryService nxMpRepositoryService;
	
	@Mock
	 NxMpDesignDocumentRepository nxMpDesignDocumentRepository;
	@Mock
	MyPriceTransactionUtil myPriceTransactionUtil;
	
	@Mock
	NxDesignAuditRepository nxDesignAuditRepository;
	
	@Mock
	private NxLookupDataRepository nxLookupDataRepository;	
	
	@Mock
	private ProcessPDtoMPRestUtil processPDtoMPRestUtil;

	@Mock
	private NxMpDealRepository nxMpDealRepository;
	
	@Mock
	private NxDesignDetailsRepository nxDesignDetailsRepository;

	@Mock
	private ConfigAndUpdateRestUtilPd configAndUpdateRestUtilPd;

	@Mock
	private RestCommonUtil restCommonUtil;
	
	@Mock
	private ConfigAndUpdatePricingUtil configAndUpdatePricingUtil;

	@Mock
	private NexxusJsonUtility nexxusJsonUtility;
	
	@Mock
	private JsonPathUtil jsonPathUtil;
	
	private RetreiveICBPSPRequest retreiveICBPSPRequestAseod;
	
	private List<NxDesign> nxDesignList;
	
	@BeforeEach
	public void init() {
		retreiveICBPSPRequestAseod = new RetreiveICBPSPRequest();
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		port.setDesignStatus("N");
		port.setTypeOfInventory("From");
		designSiteOfferPort.add(port);
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("N");
		siteDetails.setThirdPartyInd("Y");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("6");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequestAseod.setSolution(solution);
		
		nxDesignList = new ArrayList<>();
		NxDesign design = new NxDesign();
		NxDesignDetails designDetails = new NxDesignDetails();
		designDetails.setProductName("ASEod_IR");
		design.addNxDesignDetails(designDetails);
		nxDesignList.add(design);
	}

	@Test
	public void testSaveASEDesignData() throws IOException {
		try {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		port.setDesignStatus("N");
		port.setTypeOfInventory("From");
		designSiteOfferPort.add(port);
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("N");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("103");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setSolution(solution);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
		Map<String , Object> paramMap = new HashMap<String , Object>();
		JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
		Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
		String offerName = "ASE";
		Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
		NxDesign nxDesign = new NxDesign();
		Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
		List<NxMpDesignDocument> resultList = new ArrayList<>();
		Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
		Map<String, Object> designResult = new HashMap<String, Object>();
		Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
				anyString())).thenReturn(designResult);
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(false);
		NxMpDeal nxMpDeal = new NxMpDeal();
		Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		
		//rest call
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
		Map<String,Object> restResponseMap = new HashMap<>();
		restResponseMap.put(MyPriceConstants.RESPONSE_STATUS, true);
		restResponseMap.put(MyPriceConstants.REST_MP_CONFIG,true);
		restResponseMap.put(MyPriceConstants.NX_DESIGN_ID_SUCCESSFULLY_CONFIGURED, 1L);
		List<Long> updatePricingList=new ArrayList<Long>();
		updatePricingList.add(1L);
		paramMap.put(StringConstants.TRANSACTION_TYPE, StringConstants.TRANSACTION_TYPE_NEW);
		doNothing().when(processPDtoMPRestUtil).processConfigSolDesignResponse(anyMap(),any(),anyString(),anyString(),
    			anyLong(),anyString(),anyString(),anyList(),anyString());
		doAnswer(new Answer() {
			   public Object answer(InvocationOnMock invocation) {
				   Map paramMap=invocation.getArgument(2, Map.class);
				   paramMap.put(MyPriceConstants.DESIGN_ID_FOR_UPDATE_PRICING, updatePricingList);
				   return restResponseMap;
			   }})
			 .when(processPDtoMPRestUtil).restConfigAndDesign(any(),any(),anyMap(),any(),anyString());
		Map<String,Object> updatePricRestResponseMap = new HashMap<>();
		updatePricRestResponseMap.put(MyPriceConstants.RESPONSE_STATUS,true);
		updatePricRestResponseMap.put(MyPriceConstants.TRANSACTION_TYPE, "UPdatePricing");
		Mockito.when(processPDtoMPRestUtil.callUpdatePricing(anyMap(), anyString())).thenReturn(updatePricRestResponseMap);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
	
	@Test
	public void testSaveASExistingDesignData() throws IOException {
		try {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		port.setDesignStatus("N");
		port.setTypeOfInventory("From");
		designSiteOfferPort.add(port);
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("U");
		siteDetails.setDesignModifiedInd("Y");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("103");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setSolution(solution);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
		Map<String , Object> paramMap = new HashMap<String , Object>();
		JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
		Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
		String offerName = "ASE";
		Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
		NxDesign nxDesign = new NxDesign();
		Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
		List<NxMpDesignDocument> resultList = new ArrayList<>();
		Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
		Map<String, Object> designResult = new HashMap<String, Object>();
		Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
				anyString())).thenReturn(designResult);
		NxMpDeal nxMpDeal = new NxMpDeal();
		Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
		Map<String,Object> restResponseMap = new HashMap<>();
		restResponseMap.put(MyPriceConstants.RESPONSE_STATUS, true);
		restResponseMap.put(MyPriceConstants.REST_MP_CONFIG,true);
		restResponseMap.put(MyPriceConstants.NX_DESIGN_ID_SUCCESSFULLY_CONFIGURED, 1L);
		List<Long> updatePricingList=new ArrayList<Long>();
		updatePricingList.add(1L);
		paramMap.put(StringConstants.TRANSACTION_TYPE, StringConstants.TRANSACTION_TYPE_EXISTING);
		doNothing().when(processPDtoMPRestUtil).processConfigSolDesignResponse(anyMap(),any(),anyString(),anyString(),
    			anyLong(),anyString(),anyString(),anyList(),anyString());
		doAnswer(new Answer() {
			   public Object answer(InvocationOnMock invocation) {
				   Map paramMap=invocation.getArgument(2, Map.class);
				   paramMap.put(MyPriceConstants.DESIGN_ID_FOR_UPDATE_PRICING, updatePricingList);
				   paramMap.put(MyPriceConstants.DESIGN_ID_FOR_UPDATE_PRICING_RECONFIGURE, updatePricingList);
				   return restResponseMap;
			   }})
			 .when(processPDtoMPRestUtil).restConfigAndDesign(any(),any(),anyMap(),any(),anyString());
		Map<String,Object> updatePricRestResponseMap = new HashMap<>();
		updatePricRestResponseMap.put(MyPriceConstants.RESPONSE_STATUS,true);
		updatePricRestResponseMap.put(MyPriceConstants.TRANSACTION_TYPE, "UPdatePricing");
		Mockito.when(processPDtoMPRestUtil.callUpdatePricing(anyMap(), anyString())).thenReturn(updatePricRestResponseMap);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
	
	@Test
	public void testSavesolutionData() {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		List<ActionDeterminants> actionDeterminants = new ArrayList<>();
		ActionDeterminants actionDeterminant = new ActionDeterminants();
		actionDeterminant.setActivity("activity");
		actionDeterminants.add(actionDeterminant);
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("U");
		siteDetails.setDesignModifiedInd("designModifiedInd");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("6");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setActionDeterminants(actionDeterminants);
		retreiveICBPSPRequest.setSolution(solution);
		Long solutionId =1L;
		NxDesignAudit nxDesignAudit = new NxDesignAudit();
		Mockito.when( nxDesignAuditRepository.findByNxRefIdAndTransaction(solutionId,CommonConstants.SOLUTION_DATA)).thenReturn(nxDesignAudit);
		pedSnsdServiceUtilTest.saveSolutionData(retreiveICBPSPRequest, solutionId);
	}
	
	@Test
	public void testSavesolutionDataWithoutnxDesignAudit() {
		try {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		List<ActionDeterminants> actionDeterminants = new ArrayList<>();
		ActionDeterminants actionDeterminant = new ActionDeterminants();
		actionDeterminant.setActivity("activity");
		actionDeterminants.add(actionDeterminant);
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("U");
		siteDetails.setDesignModifiedInd("designModifiedInd");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("6");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setActionDeterminants(actionDeterminants);
		retreiveICBPSPRequest.setSolution(solution);
		Long solutionId =1L;
		Mockito.when( nxDesignAuditRepository.findByNxRefIdAndTransaction(solutionId,CommonConstants.SOLUTION_DATA)).thenReturn(null);
		pedSnsdServiceUtilTest.saveSolutionData(retreiveICBPSPRequest, solutionId);
		}catch(Exception e) {
			e.printStackTrace();
		}
		}
	
	
	@Test
	public void testSaveADEDesignData() throws IOException {
		try {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Circuit> circuits = new ArrayList<>();
		Circuit circuit = new Circuit();
		circuit.setDesignStatus("designStatus");
		circuit.setTypeOfInventory("From");
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("AD1035797");
		siteDetails.setDesignStatus("N");
		site.add(siteDetails);
		List<References> references = new ArrayList<>();
		References reference = new References();
		reference.setReferenceId(1L);
		reference.setReferenceType("referenceType");
		references.add(reference);
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(1210L);
		component.setComponentCodeType("Circuit");
		component.setComponentId(99988946032L);
		component.setReferences(references);
		List<UDFBaseData> udfdesignDetails = new ArrayList<>();
		UDFBaseData udfDetails = new UDFBaseData();
		udfDetails.setUdfId(200162);
		List<String> udfAttributeText = new ArrayList<>();
		udfAttributeText.add("AD1022300");
		udfDetails.setUdfAttributeText(udfAttributeText);
		udfdesignDetails.add(udfDetails);
		component.setDesignDetails(udfdesignDetails);
		components.add(component);
		circuit.setComponent(components);
		circuits.add(circuit);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("120");
		offers.add(offer);
		offer.setSite(site);
		offer.setCircuit(circuits);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setSolution(solution);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
		Map<String , Object> paramMap = new HashMap<String , Object>();
		JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
		Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
		String offerName = "ADE";
		Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
		NxDesign nxDesign = new NxDesign();
		nxDesign.setAsrItemId("asrItemId");
		nxDesign.setAttuId("hk544h");
		Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
		List<NxMpDesignDocument> resultList = new ArrayList<>();
		Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
		Map<String, Object> designResult = new HashMap<String, Object>();
		Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
				anyString())).thenReturn(designResult);
		NxMpDeal nxMpDeal = new NxMpDeal();
		Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(false);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		
		//for rest call
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
		Map<String,Object> restResponseMap = new HashMap<>();
		restResponseMap.put(MyPriceConstants.RESPONSE_STATUS, true);
		restResponseMap.put(MyPriceConstants.REST_MP_CONFIG,true);
		Mockito.when(processPDtoMPRestUtil.restConfigAndDesign(any(),any(),anyMap(),any(),anyString())).thenReturn(restResponseMap);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		
		}catch(Exception e) {
			e.printStackTrace();
		}
	}

	@Test
	public void testSaveASENoDDesignData() throws IOException {
		try {
		RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
		Solution solution = new Solution();
		solution.setUserId("userId");
		solution.setUserFirstName("userFirstName");
		solution.setUserLastName("userLastName");
		solution.setContractTerm(1L);
		solution.setSolutionStatus("solutionStatus");
		List<Port> designSiteOfferPort = new ArrayList<>();
		Port port = new Port();
		port.setDesignStatus("N");
		port.setTypeOfInventory("From");
		designSiteOfferPort.add(port);
		List<Site> site = new ArrayList<>();
		Site siteDetails = new Site();
		siteDetails.setSiteId(1L);
		siteDetails.setAsrItemId("asrItemId");
		siteDetails.setDesignStatus("N");
		siteDetails.setThirdPartyInd("Y");
		List<Component> components = new ArrayList<>();
		Component component = new Component();
		component.setComponentCodeId(10L);
		component.setComponentCodeType("Connection");
		component.setComponentId(99988946032L);
		components.add(component);
		port.setComponent(components);
		siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
		site.add(siteDetails);
		List<Offer> offers = new ArrayList<>();
		Offer offer  = new Offer();
		offer.setOfferId("6");
		offers.add(offer);
		offer.setSite(site);
		solution.setOffers(offers);
		retreiveICBPSPRequest.setSolution(solution);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
		Map<String , Object> paramMap = new HashMap<String , Object>();
		JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
		Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
		String offerName = "ASENoD";
		Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
		NxDesign nxDesign = new NxDesign();
		Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
		List<NxMpDesignDocument> resultList = new ArrayList<>();
		Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
		Map<String, Object> designResult = new HashMap<String, Object>();
		Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
				anyString())).thenReturn(designResult);
		NxMpDeal nxMpDeal = new NxMpDeal();
		Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
		Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
		Map<String,Object> restResponseMap = new HashMap<>();
		restResponseMap.put(MyPriceConstants.RESPONSE_STATUS, true);
		restResponseMap.put(MyPriceConstants.REST_MP_CONFIG,true);
		restResponseMap.put(MyPriceConstants.NX_DESIGN_ID_SUCCESSFULLY_CONFIGURED, 1L);
		List<Long> updatePricingList=new ArrayList<Long>();
		updatePricingList.add(1L);
		paramMap.put(StringConstants.TRANSACTION_TYPE, StringConstants.TRANSACTION_TYPE_NEW);
		doNothing().when(processPDtoMPRestUtil).processConfigSolDesignResponse(anyMap(),any(),anyString(),anyString(),
    			anyLong(),anyString(),anyString(),anyList(),anyString());
		Mockito.when(processPDtoMPRestUtil.restConfigAndDesign(any(),any(),anyMap(),any(),anyString())).thenReturn(restResponseMap);
		Map<String,Object> updatePricRestResponseMap = new HashMap<>();
		updatePricRestResponseMap.put(MyPriceConstants.RESPONSE_STATUS,true);
		updatePricRestResponseMap.put(MyPriceConstants.TRANSACTION_TYPE, "UPdatePricing");
		Mockito.when(processPDtoMPRestUtil.callUpdatePricing(anyMap(), anyString())).thenReturn(updatePricRestResponseMap);
		pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		}catch(Exception e) {
			e.printStackTrace();
		}
	}

		@Test
		public void testSaveDesignDataWithoutSolutionData() throws IOException {
			RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
			Solution solution = new Solution();
			solution.setUserId("userId");
			solution.setUserFirstName("userFirstName");
			solution.setUserLastName("userLastName");
			solution.setContractTerm(1L);
			solution.setSolutionStatus("solutionStatus");
			List<Port> designSiteOfferPort = new ArrayList<>();
			Port port = new Port();
			port.setDesignStatus("designStatus");
			port.setTypeOfInventory("From");
			designSiteOfferPort.add(port);
			List<Site> site = new ArrayList<>();
			Site siteDetails = new Site();
			siteDetails.setSiteId(1L);
			siteDetails.setAsrItemId("asrItemId");
			siteDetails.setDesignStatus("U");
			siteDetails.setDesignModifiedInd("designModifiedInd");
			List<Component> components = new ArrayList<>();
			Component component = new Component();
			component.setComponentCodeId(10L);
			component.setComponentCodeType("Connection");
			component.setComponentId(99988946032L);
			components.add(component);
			port.setComponent(components);
			siteDetails.setDesignSiteOfferPort(designSiteOfferPort);
			site.add(siteDetails);
			List<Offer> offers = new ArrayList<>();
			Offer offer  = new Offer();
			offer.setOfferId("6");
			offers.add(offer);
			offer.setSite(site);
			solution.setOffers(offers);
			retreiveICBPSPRequest.setSolution(solution);
			NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
			CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
			createTransactionResponse.setPriceScenarioId(1L);
			Map<String , Object> paramMap = new HashMap<String , Object>();
			JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
			Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
			String offerName = "ASE";
			Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
			NxDesign nxDesign = new NxDesign();
			List<NxDesignDetails> designDetails = new ArrayList<>();
			NxDesignDetails nxDesignDetail= new NxDesignDetails();
			String designData ="{\"nxSiteId\":142018,\"siteId\":99995475831,\"npanxx\":\"530225\",\"address1\":\"1655 West St\",\"city\":\"Redding\",\"state\":\"CA\",\"saLecName\":null,\"speedId\":null,\"saLecSwClli\":null,\"popClli\":null,\"country\":\"US\",\"macdType\":\"Add\",\"macdActivity\":\"New Start UNI/Port\",\"fromInventory\":null,\"dualSiteId\":null,\"onNetCheck\":null,\"ethernetVendor\":null,\"designSiteOfferPort\":[{\"designStatus\":\"D\",\"typeOfInventory\":null,\"milesResult\":null,\"securityDesignDetails\":null,\"macdActivityType\":null,\"component\":[{\"componentCodeId\":10,\"fromInvYN\":null,\"logicalChannelPvcID\":null,\"eteVpnKey\":null,\"diversityGroupId\":null,\"componentCodeType\":\"Connection\",\"componentId\":null,\"externalField\":null,\"parentComponentId\":null,\"externalKeyRef\":null,\"mvlInd\":null,\"userEnteredVpn\":null,\"siteId\":null,\"logicalChannelId\":null,\"designDetails\":[{\"udfAttributeId\":[30595],\"udfId\":20030,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":\"Site Type\"},{\"udfAttributeId\":[30515],\"udfId\":20017,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":\"ServiceId\"}],\"routeTargets\":null,\"references\":null},{\"componentCodeId\":30,\"fromInvYN\":null,\"logicalChannelPvcID\":null,\"eteVpnKey\":null,\"diversityGroupId\":null,\"componentCodeType\":\"Port\",\"componentId\":null,\"externalField\":null,\"parentComponentId\":null,\"externalKeyRef\":null,\"mvlInd\":null,\"userEnteredVpn\":null,\"siteId\":null,\"logicalChannelId\":null,\"designDetails\":[{\"udfAttributeId\":null,\"udfId\":200032,\"readOnly\":null,\"udfAttributeText\":[\"0\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300359],\"udfId\":200029,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30605],\"udfId\":200028,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":200014,\"readOnly\":null,\"udfAttributeText\":[\"2020-03-27 00:00:00.0\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[302216],\"udfId\":21860,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[302216],\"udfId\":21861,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[605332],\"udfId\":21960,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301476],\"udfId\":21962,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":21961,\"readOnly\":null,\"udfAttributeText\":[\"0.4\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[55065],\"udfId\":21862,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":22021,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":22019,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":22020,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":22021,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300302],\"udfId\":20013,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":20169,\"readOnly\":null,\"udfAttributeText\":[\"100003522816\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301473],\"udfId\":20171,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300249],\"udfId\":200006,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":20184,\"readOnly\":null,\"udfAttributeText\":[\"RDNHCA07\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300250],\"udfId\":200008,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200009,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[302000],\"udfId\":200010,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30605],\"udfId\":200011,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30605],\"udfId\":200012,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200013,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":200017,\"readOnly\":null,\"udfAttributeText\":[\"Recap\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300278],\"udfId\":200018,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300284],\"udfId\":200020,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300294],\"udfId\":200021,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301475],\"udfId\":200022,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[55042],\"udfId\":200133,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200027,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300364],\"udfId\":200033,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300367],\"udfId\":200035,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300370],\"udfId\":200036,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300373],\"udfId\":200037,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300378],\"udfId\":200040,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":200045,\"readOnly\":null,\"udfAttributeText\":[\"RDNGCA02\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200048,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":200057,\"readOnly\":null,\"udfAttributeText\":[\"NA; na\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[300401],\"udfId\":200058,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[55064],\"udfId\":200059,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200060,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":null,\"udfId\":200062,\"readOnly\":null,\"udfAttributeText\":[\"PACIFIC BELL\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200075,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200079,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301508],\"udfId\":200134,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301475],\"udfId\":20173,\"readOnly\":null,\"udfAttributeText\":null,\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null}],\"routeTargets\":null,\"references\":null}],\"routerDetails\":null,\"logicalChannelDetail\":null,\"customDesign\":null,\"accessPricingAQ\":null,\"aggregateBilling\":null,\"portValidationMessage\":null,\"voiceFeatureDetail\":null}],\"priceDetails\":{\"componentDetails\":[{\"componentCodeId\":null,\"componentCodeType\":null,\"componentId\":99995475831,\"componentType\":\"Site\",\"componentParentId\":2325043,\"componentAttributes\":[{\"componentFieldName\":\"Country\",\"componentFieldValue\":\"US\"}],\"priceAttributes\":null,\"scpPriceMessages\":null},{\"componentCodeId\":null,\"componentCodeType\":null,\"componentId\":7273294,\"componentType\":\"Port\",\"componentParentId\":99995475831,\"componentAttributes\":[{\"componentFieldName\":\"Country\",\"componentFieldValue\":\"US\"}],\"priceAttributes\":[{\"productRateId\":0,\"beid\":\"EYQFX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":214.5,\"targetListPrice\":null,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT\",\"priceUnit\":\"Monthly\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":null,\"targetNetPrice\":null,\"localTotalPrice\":null,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":\"PORT\",\"priceName\":\"1 Gb\",\"typeOfInventory\":null,\"priceInUSD\":null,\"priceScenarioId\":1863575,\"rateGroup\":\"OEM_PORT\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":\"ASE\",\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":null,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"R6ELX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":500.7,\"targetListPrice\":null,\"icbDesiredDiscPerc\":null,\"priceType\":\"COS\",\"priceUnit\":\"Monthly\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":null,\"targetNetPrice\":null,\"localTotalPrice\":null,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":\"COS\",\"priceName\":\"100 Mb\",\"typeOfInventory\":null,\"priceInUSD\":null,\"priceScenarioId\":1863575,\"rateGroup\":\"OEM_REALTIME\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":\"ASE\",\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":null,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null}],\"scpPriceMessages\":null}],\"priceMessage\":null},\"address\":null,\"postalCode\":null,\"siteName\":\"1655 West St\",\"swcClli\":null,\"customerLocationClli\":null,\"active\":null,\"emc\":null,\"carrierHotel\":null,\"attComments\":null,\"newBuilding\":null,\"customerReference\":null,\"asrItemId\":\"100003522816\",\"lataCode\":\"724\",\"zipCode\":\"96001\",\"address2\":null,\"room\":null,\"floor\":null,\"building\":null,\"siteComment\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null,\"endPointSiteIdentifier\":\"A\",\"buildingClli\":null,\"regionCode\":\"Y\",\"activityType\":null,\"cancellationReason\":null,\"product\":\"ASEoD\",\"quantity\":\"1\",\"nssEngagement\":null,\"designStatus\":\"N\",\"multiGigeIndicator\":null,\"alias\":\"1655 West St\",\"macdActionType\":null,\"lconDetails\":[{\"lconType\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null}],\"globalLocationId\":\"00000W65IM\",\"jurisdiction\":\"FCC - 12 States\",\"certificationStatus\":null,\"designModifiedInd\":\"Y\",\"independentCarrierCompanyLATA\":null,\"independentCarrierCompanyName\":null,\"interDepartmentMeetPointChecklistURL\":null,\"diverseFromReferenceInfo\":null,\"opticalTerminatingNetworkCarrierFacilityAssignment\":null,\"collocationCarrierFacilityAssignment\":null,\"assetInvestmentSheetIndicator\":null,\"swcCertification\":\"Certified\",\"designVersion\":\"1\",\"specialConstructionPaymentUrl\":null,\"thirdPartyInd\":\"N\",\"accessCarrierNameAbbreviation\":null,\"design\":null,\"loopLength\":null,\"numOfCopperRepeaters\":null,\"inventoryNumOfPairs\":null,\"taskClli\":null,\"numberRemoteTerminals\":null,\"referenceOfferId\":null,\"siteNpanxx\":null}";
			nxDesignDetail.setComponentId("componentId");
			nxDesignDetail.setDesignData(designData);
			designDetails.add(nxDesignDetail);
			nxDesign.setNxDesignDetails(designDetails);
			Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
			List<NxMpDesignDocument> resultList = new ArrayList<>();
			Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
			Map<String, Object> designResult = new HashMap<String, Object>();
			Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
					anyString())).thenReturn(designResult);
			List<NxLookupData> restProductDetails=new ArrayList<>();
			Mockito.when(nxLookupDataRepository.findByDatasetNameAndItemId(any(),any())).thenReturn(restProductDetails);
			Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
			NxMpDeal nxMpDeal = new NxMpDeal();
			Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
			pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
		}
		
		@Test
		public void testSaveEplsDesignData() throws IOException {
			try {
			RetreiveICBPSPRequest retreiveICBPSPRequest = new RetreiveICBPSPRequest();
			Solution solution = new Solution();
			solution.setUserId("userId");
			solution.setUserFirstName("userFirstName");
			solution.setUserLastName("userLastName");
			solution.setContractTerm(1L);
			solution.setSolutionStatus("solutionStatus");
			solution.setSourceName("IPNE");
			solution.setSubmitToMyprice("Y");
			List<Circuit> circuits = new ArrayList<>();
			Circuit circuit = new Circuit();
			circuit.setDesignStatus("designStatus");
			circuit.setTypeOfInventory("From");
			List<Site> site = new ArrayList<>();
			Site siteDetails = new Site();
			siteDetails.setSiteId(1L);
			siteDetails.setAsrItemId("AD1035797");
			siteDetails.setDesignStatus("N");
			site.add(siteDetails);
			List<References> references = new ArrayList<>();
			References reference = new References();
			reference.setReferenceId(1L);
			reference.setReferenceType("referenceType");
			references.add(reference);
			List<Component> components = new ArrayList<>();
			Component component = new Component();
			component.setComponentCodeId(1210L);
			component.setComponentCodeType("Circuit");
			component.setComponentId(99988946032L);
			component.setReferences(references);
			List<UDFBaseData> udfdesignDetails = new ArrayList<>();
			UDFBaseData udfDetails = new UDFBaseData();
			udfDetails.setUdfId(200162);
			List<String> udfAttributeText = new ArrayList<>();
			udfAttributeText.add("AD1022300");
			udfDetails.setUdfAttributeText(udfAttributeText);
			udfdesignDetails.add(udfDetails);
			component.setDesignDetails(udfdesignDetails);
			components.add(component);

			Component enpointA = new Component();
			enpointA.setComponentCodeId(1220L);
			enpointA.setComponentCodeType("Endpoint");
			enpointA.setComponentId(99988946082L);
			enpointA.setReferences(references);
			List<UDFBaseData> EndudfdesignDetails = new ArrayList<>();
			UDFBaseData EndudfDetails = new UDFBaseData();
			EndudfDetails.setUdfId(1000371);
			List<Long> EndudfAttributeId = new ArrayList<>();
			EndudfAttributeId.add(722909470L);
			EndudfDetails.setUdfAttributeId(EndudfAttributeId);
			EndudfdesignDetails.add(udfDetails);
			enpointA.setDesignDetails(EndudfdesignDetails);
			components.add(enpointA);
			
			circuit.setComponent(components);
			circuits.add(circuit);
			List<Offer> offers = new ArrayList<>();
			Offer offer  = new Offer();
			offer.setOfferId("210");
			offers.add(offer);
			offer.setSite(site);
			offer.setCircuit(circuits);
			solution.setOffers(offers);
			retreiveICBPSPRequest.setSolution(solution);
			NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
			CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
			Map<String , Object> paramMap = new HashMap<String , Object>();
			JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequest);
			Mockito.when(mapper.valueToTree(retreiveICBPSPRequest)).thenReturn(dppTree);
			String offerName = "EPLSWAN";
			Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
			NxDesign nxDesign = new NxDesign();
			nxDesign.setAsrItemId("asrItemId");
			nxDesign.setAttuId("hk544h");
			Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
			List<NxMpDesignDocument> resultList = new ArrayList<>();
			Mockito.when(nxMpDesignDocumentRepository.getDataByNxTxnIdAndNxDesignId(anyLong(),anyLong())).thenReturn(resultList);
			Map<String, Object> designResult = new HashMap<String, Object>();
			Mockito.when(myPriceTransactionUtil.configAndUpdatePricing(any(), any(),any(), anyMap(), 
					anyString())).thenReturn(designResult);
			NxMpDeal nxMpDeal = new NxMpDeal();
			Mockito.when(nxMpDealRepository.findByNxTxnId(Mockito.anyLong())).thenReturn(nxMpDeal);
			Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(false);
			pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
			
			//for rest call
			Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
			Map<String,Object> restResponseMap = new HashMap<>();
			restResponseMap.put(MyPriceConstants.RESPONSE_STATUS, true);
			restResponseMap.put(MyPriceConstants.REST_MP_CONFIG,true);
			Mockito.when(processPDtoMPRestUtil.restConfigAndDesign(any(),any(),anyMap(),any(),anyString())).thenReturn(restResponseMap);
			pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequest, nxSolutionDetail, createTransactionResponse, paramMap);
			
			}catch(Exception e) {
				e.printStackTrace();
			}
		}
		@Test
		public void testSaveUpdatePricingResponseDesignDetails() {
			List<NxDesignDetails> nxDesinDetailList = new ArrayList<>();
			NxDesignDetails nxDesignDetails = new NxDesignDetails();
			nxDesinDetailList.add(nxDesignDetails);
			Mockito.when(nxDesignDetailsRepository.findByNxDesignIdIn(anyList())).thenReturn(nxDesinDetailList);
			 List<Long> designIdForUpDatePricing = new ArrayList<>();
			Map<String, Object> updatePricRestResponseMap = new HashMap<>();
			pedSnsdServiceUtilTest.saveUpdatePricingResponseDesignDetails(true, designIdForUpDatePricing, updatePricRestResponseMap);
			
			updatePricRestResponseMap.put(MyPriceConstants.RESPONSE_MSG,"error");
			pedSnsdServiceUtilTest.saveUpdatePricingResponseDesignDetails(false, designIdForUpDatePricing, updatePricRestResponseMap);

		}
		
	@Test
	public void testFindAseAsrItemId() throws IOException {
		String json = "{ \"siteId\": 99988948746, \"npanxx\": \"987654\", \"address1\": \"2051 MERCY DR\", \"city\": \"ORLANDO\", \"state\": \"FL\", \"macdType\": \"Change\", \"macdActivity\": \"Change Port Connection Speed;\", \"designSiteOfferPort\": [ { \"typeOfInventory\": \"From\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20169, \"udfAttributeText\": [ \"R00002034839\" ] }, { \"udfId\": 20182, \"udfAttributeText\": [ \"ORLDFLMA4VF\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20188, \"udfAttributeText\": [ \"ORLDFLMASD0\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200009, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200011, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200012, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfId\": 200019, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300360 ], \"udfId\": 200030, \"udfAttributeText\": [ \"U\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300364 ], \"udfId\": 200033, \"udfAttributeText\": [ \"1 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"7\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"7\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfId\": 200146, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301590 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KRE1\" ] } ] } ] }, { \"typeOfInventory\": \"To\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20169, \"udfAttributeText\": [ \"R00002034839\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200009, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300260 ], \"udfId\": 200010, \"udfAttributeText\": [ \"Change Port Connection Speed\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200011, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200012, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200013, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 74933 ], \"udfId\": 200031, \"udfAttributeText\": [ \"250 Mb\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300365 ], \"udfId\": 200033, \"udfAttributeText\": [ \"10 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200007, \"udfAttributeText\": [ \"22/KRFN/233333/SD\" ] }, { \"udfId\": 200014, \"udfAttributeText\": [ \"2020-07-08 00:00:00.0\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"10\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"10\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 301507 ], \"udfId\": 200134, \"udfAttributeText\": [ \"9STATES\" ] }, { \"udfAttributeId\": [ 604699 ], \"udfId\": 200145, \"udfAttributeText\": [ \"COMPLEX_MACDIII\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22019, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22020, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21860, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21861, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 605332 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Green\" ] }, { \"udfId\": 21961, \"udfAttributeText\": [ \"1.37\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301607 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KSED\" ] } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 99988948746, \"componentType\": \"Site\", \"componentParentId\": 6511617, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [] }, { \"componentId\": 9270724, \"componentType\": \"Port\", \"componentParentId\": 99988948746, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 8000, \"targetListPrice\": 8000, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 8000, \"targetNetPrice\": 8000, \"localTotalPrice\": 8000, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - 12\", \"priceInUSD\": \"8000\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 15750, \"targetListPrice\": 15750, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 15750, \"targetNetPrice\": 15750, \"localTotalPrice\": 15750, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - NRC\", \"priceInUSD\": \"15750\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 6382, \"targetListPrice\": 6382, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 6382, \"targetNetPrice\": 6382, \"localTotalPrice\": 6382, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - 12\", \"priceInUSD\": \"6382\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 150, \"targetListPrice\": 150, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 150, \"targetNetPrice\": 150, \"localTotalPrice\": 150, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - NRC\", \"priceInUSD\": \"150\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" } ] } ] }, \"siteName\": \"loc1\", \"asrItemId\": \"R00002034839\", \"lataCode\": \"458\", \"zipCode\": \"36740\", \"endPointSiteIdentifier\": \"A\", \"regionCode\": \"Y\", \"quantity\": \"1\", \"designStatus\": \"N\", \"alias\": \"loc1\", \"lconDetails\": [ {} ], \"globalLocationId\": \"000006ZFMP\", \"jurisdiction\": \"FCC\", \"swcCertification\": \"Certified\", \"designVersion\": \"1\" }";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode siteJson = mapper.readTree(json);
		String arItemIdResult=pedSnsdServiceUtilTest.findAseAsrItemId(siteJson);
		assertEquals("R00002034839", arItemIdResult);
		
		String jsonData = "{\"siteId\": 99988948746, \"npanxx\": \"987654\", \"address1\": \"2051 MERCY DR\", \"city\": \"ORLANDO\", \"state\": \"FL\", \"macdType\": \"Change\", \"macdActivity\": \"Change Port Connection Speed;\", \"designSiteOfferPort\": [ { \"typeOfInventory\": \"From\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20182, \"udfAttributeText\": [ \"ORLDFLMA4VF\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20188, \"udfAttributeText\": [ \"ORLDFLMASD0\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200009, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200011, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200012, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfId\": 200019, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300360 ], \"udfId\": 200030, \"udfAttributeText\": [ \"U\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300364 ], \"udfId\": 200033, \"udfAttributeText\": [ \"1 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"7\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"7\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfId\": 200146, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301590 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KRE1\" ] } ] } ] }, { \"typeOfInventory\": \"To\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20169, \"udfAttributeText\": [ \"R00002034839\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200009, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300260 ], \"udfId\": 200010, \"udfAttributeText\": [ \"Change Port Connection Speed\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200011, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200012, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200013, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 74933 ], \"udfId\": 200031, \"udfAttributeText\": [ \"250 Mb\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300365 ], \"udfId\": 200033, \"udfAttributeText\": [ \"10 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200007, \"udfAttributeText\": [ \"22/KRFN/233333/SD\" ] }, { \"udfId\": 200014, \"udfAttributeText\": [ \"2020-07-08 00:00:00.0\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"10\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"10\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 301507 ], \"udfId\": 200134, \"udfAttributeText\": [ \"9STATES\" ] }, { \"udfAttributeId\": [ 604699 ], \"udfId\": 200145, \"udfAttributeText\": [ \"COMPLEX_MACDIII\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22019, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22020, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21860, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21861, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 605332 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Green\" ] }, { \"udfId\": 21961, \"udfAttributeText\": [ \"1.37\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301607 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KSED\" ] } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 99988948746, \"componentType\": \"Site\", \"componentParentId\": 6511617, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [] }, { \"componentId\": 9270724, \"componentType\": \"Port\", \"componentParentId\": 99988948746, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 8000, \"targetListPrice\": 8000, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 8000, \"targetNetPrice\": 8000, \"localTotalPrice\": 8000, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - 12\", \"priceInUSD\": \"8000\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 15750, \"targetListPrice\": 15750, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 15750, \"targetNetPrice\": 15750, \"localTotalPrice\": 15750, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - NRC\", \"priceInUSD\": \"15750\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 6382, \"targetListPrice\": 6382, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 6382, \"targetNetPrice\": 6382, \"localTotalPrice\": 6382, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - 12\", \"priceInUSD\": \"6382\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 150, \"targetListPrice\": 150, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 150, \"targetNetPrice\": 150, \"localTotalPrice\": 150, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - NRC\", \"priceInUSD\": \"150\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" } ] } ] }, \"siteName\": \"loc1\", \"lataCode\": \"458\", \"zipCode\": \"36740\", \"endPointSiteIdentifier\": \"A\", \"regionCode\": \"Y\", \"quantity\": \"1\", \"designStatus\": \"N\", \"alias\": \"loc1\", \"lconDetails\": [ {} ], \"globalLocationId\": \"000006ZFMP\", \"jurisdiction\": \"FCC\", \"swcCertification\": \"Certified\", \"designVersion\": \"1\" }";
		JsonNode siteJsonWithoutAsritemId = mapper.readTree(jsonData);
		pedSnsdServiceUtilTest.findAseAsrItemId(siteJsonWithoutAsritemId);
	}
	
	@Test
	public void testFindAdeAsrItemId() throws IOException {
		String json = "{ \"component\": [ { \"componentCodeId\": 1210, \"componentCodeType\": \"Circuit\", \"componentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [], \"udfId\": 200182, \"udfAttributeText\": [ \"N/A\" ] }, { \"udfAttributeId\": [], \"udfId\": 200188, \"udfAttributeText\": [ \"OKGS\" ] }, { \"udfAttributeId\": [], \"udfId\": 200189, \"udfAttributeText\": [ \"100\" ] }, { \"udfAttributeId\": [], \"udfId\": 20186, \"udfAttributeText\": [ \"OK--\" ] }, { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [ 301770 ], \"udfId\": 200163, \"udfAttributeText\": [ \"Add\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200168, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200184, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200170, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200180, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301773 ], \"udfId\": 200164, \"udfAttributeText\": [ \"Newstart Circuit\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200167, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200185, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"NC\" ] }, { \"udfAttributeId\": [], \"udfId\": 200172, \"udfAttributeText\": [ \"1\" ] }, { \"udfAttributeId\": [], \"udfId\": 200198, \"udfAttributeText\": [ \"3\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [], \"udfId\": 200162, \"udfAttributeText\": [ \"AD1036566\" ] }, { \"udfAttributeId\": [], \"udfId\": 20781, \"udfAttributeText\": [ \"6\" ] }, { \"udfAttributeId\": [ 302220 ], \"udfId\": 200193, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] } ], \"references\": [] }, { \"componentCodeId\": 1220, \"componentCodeType\": \"Endpoint\", \"componentId\": 98413, \"parentComponentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [], \"udfId\": 20187, \"udfAttributeText\": [ \"02OTF.202\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200212, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 304240 ], \"udfId\": 200208, \"udfAttributeText\": [ null ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200213, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301833 ], \"udfId\": 200179, \"udfAttributeText\": [ \"1310 - SR1 Single Mode Fiber (SMF)\" ] }, { \"udfAttributeId\": [ 301806 ], \"udfId\": 200175, \"udfAttributeText\": [ \"IR / IF End-User Customer\" ] }, { \"udfAttributeId\": [ 301848 ], \"udfId\": 200205, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200218, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301823 ], \"udfId\": 200178, \"udfAttributeText\": [ \"Unprotected\" ] }, { \"udfAttributeId\": [ 301890 ], \"udfId\": 200217, \"udfAttributeText\": [ \"End-User Customer\" ] }, { \"udfAttributeId\": [ 605334 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Red\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfAttributeId\": [], \"udfId\": 21961, \"udfAttributeText\": [ \"1.35\" ] }, { \"udfAttributeId\": [], \"udfId\": 21033, \"udfAttributeText\": [ \"A\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"NC\" ] }, { \"udfAttributeId\": [], \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfAttributeId\": [], \"udfId\": 21036, \"udfAttributeText\": [ \"GREEN\" ] }, { \"udfAttributeId\": [], \"udfId\": 200160, \"udfAttributeText\": [ \"CHCJILLFH00\" ] }, { \"udfAttributeId\": [], \"udfId\": 200045, \"udfAttributeText\": [ \"CHCGILLW\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] } ], \"references\": [ { \"referenceType\": \"Site\", \"referenceId\": 99995150542 } ] }, { \"componentCodeId\": 1220, \"componentCodeType\": \"Endpoint\", \"componentId\": 98414, \"parentComponentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [], \"udfId\": 20187, \"udfAttributeText\": [ \"02OTF.202\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200212, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 304240 ], \"udfId\": 200208, \"udfAttributeText\": [ null ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200213, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301833 ], \"udfId\": 200179, \"udfAttributeText\": [ \"1310 - SR1 Single Mode Fiber (SMF)\" ] }, { \"udfAttributeId\": [ 301806 ], \"udfId\": 200175, \"udfAttributeText\": [ \"IR / IF End-User Customer\" ] }, { \"udfAttributeId\": [ 301848 ], \"udfId\": 200205, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200218, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301823 ], \"udfId\": 200178, \"udfAttributeText\": [ \"Unprotected\" ] }, { \"udfAttributeId\": [ 301890 ], \"udfId\": 200217, \"udfAttributeText\": [ \"End-User Customer\" ] }, { \"udfAttributeId\": [], \"udfId\": 21034, \"udfAttributeText\": [ \"Z\" ] }, { \"udfAttributeId\": [ 605334 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Red\" ] }, { \"udfAttributeId\": [ 605339 ], \"udfId\": 21962, \"udfAttributeText\": [ \"FALSE\" ] }, { \"udfAttributeId\": [], \"udfId\": 21961, \"udfAttributeText\": [ \"0.62\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"SC\" ] }, { \"udfAttributeId\": [], \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 3\" ] }, { \"udfAttributeId\": [], \"udfId\": 21037, \"udfAttributeText\": [ \"YELLOW\" ] }, { \"udfAttributeId\": [], \"udfId\": 200160, \"udfAttributeText\": [ \"CHCGILWBHAM\" ] }, { \"udfAttributeId\": [], \"udfId\": 200045, \"udfAttributeText\": [ \"CHCGILWB\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] } ], \"references\": [ { \"referenceType\": \"Site\", \"referenceId\": 99995150544 } ] } ], \"designStatus\": \"N\", \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 52655, \"componentType\": \"Circuit\", \"componentParentId\": 2449960, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Administrative Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 14.4, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Administrative Charge\", \"requestedDiscount\": 0, \"requestedRate\": 60, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Administrative Charge\", \"requestedDiscount\": 0, \"requestedRate\": 60, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Design Central Office Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 144, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Design Central Office Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Design Central Office Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] }, { \"componentId\": 98413, \"componentType\": \"Endpoint\", \"componentParentId\": 52655, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Customer Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 360, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Port Connection\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 98, \"requestedRate\": 258.5, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] }, { \"componentId\": 98414, \"componentType\": \"Endpoint\", \"componentParentId\": 52655, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Customer Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 360, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Port Connection\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 98, \"requestedRate\": 258.5, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] } ] }, \"designVersion\": \"1\" }";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode circuitjson = mapper.readTree(json);
		pedSnsdServiceUtilTest.findAdeAsrItemId(circuitjson);
	}
	
	@Test
	public void testfilterOutEmpty() {
		String result=pedSnsdServiceUtilTest.filterOutEmpty("");
		assertEquals(null, result);

		String resultdata=pedSnsdServiceUtilTest.filterOutEmpty("data");
		assertEquals("data", resultdata);

	}
	
	@Test
	public void testSaveDB() throws IOException {
		NxSolutionDetail nxSolutionDetail = null;
		String userId = "userId";
		String userFirstName="userfirstName";
		String userLastName="userLastName";
		String designStatus="N"; 
		String designModifiedInd="Y"; 
		String offerName="ASE";
		String json = "{ \"siteId\": 99988948746, \"npanxx\": \"987654\", \"address1\": \"2051 MERCY DR\", \"city\": \"ORLANDO\", \"state\": \"FL\", \"macdType\": \"Change\", \"macdActivity\": \"Change Port Connection Speed;\", \"designSiteOfferPort\": [ { \"typeOfInventory\": \"From\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20182, \"udfAttributeText\": [ \"ORLDFLMA4VF\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20188, \"udfAttributeText\": [ \"ORLDFLMASD0\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200009, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200011, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200012, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfId\": 200019, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300360 ], \"udfId\": 200030, \"udfAttributeText\": [ \"U\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300364 ], \"udfId\": 200033, \"udfAttributeText\": [ \"1 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"7\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"7\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfId\": 200146, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301590 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KRE1\" ] } ] } ] }, { \"typeOfInventory\": \"To\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20169, \"udfAttributeText\": [ \"R00002034839\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200009, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300260 ], \"udfId\": 200010, \"udfAttributeText\": [ \"Change Port Connection Speed\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200011, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200012, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200013, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 74933 ], \"udfId\": 200031, \"udfAttributeText\": [ \"250 Mb\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300365 ], \"udfId\": 200033, \"udfAttributeText\": [ \"10 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200007, \"udfAttributeText\": [ \"22/KRFN/233333/SD\" ] }, { \"udfId\": 200014, \"udfAttributeText\": [ \"2020-07-08 00:00:00.0\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"10\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"10\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 301507 ], \"udfId\": 200134, \"udfAttributeText\": [ \"9STATES\" ] }, { \"udfAttributeId\": [ 604699 ], \"udfId\": 200145, \"udfAttributeText\": [ \"COMPLEX_MACDIII\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22019, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22020, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21860, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21861, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 605332 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Green\" ] }, { \"udfId\": 21961, \"udfAttributeText\": [ \"1.37\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301607 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KSED\" ] } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 99988948746, \"componentType\": \"Site\", \"componentParentId\": 6511617, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [] }, { \"componentId\": 9270724, \"componentType\": \"Port\", \"componentParentId\": 99988948746, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 8000, \"targetListPrice\": 8000, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 8000, \"targetNetPrice\": 8000, \"localTotalPrice\": 8000, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - 12\", \"priceInUSD\": \"8000\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 15750, \"targetListPrice\": 15750, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 15750, \"targetNetPrice\": 15750, \"localTotalPrice\": 15750, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - NRC\", \"priceInUSD\": \"15750\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 6382, \"targetListPrice\": 6382, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 6382, \"targetNetPrice\": 6382, \"localTotalPrice\": 6382, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - 12\", \"priceInUSD\": \"6382\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 150, \"targetListPrice\": 150, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 150, \"targetNetPrice\": 150, \"localTotalPrice\": 150, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - NRC\", \"priceInUSD\": \"150\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" } ] } ] }, \"siteName\": \"loc1\", \"asrItemId\": \"R00002034839\", \"lataCode\": \"458\", \"zipCode\": \"36740\", \"endPointSiteIdentifier\": \"A\", \"regionCode\": \"Y\", \"quantity\": \"1\", \"designStatus\": \"N\", \"alias\": \"loc1\", \"lconDetails\": [ {} ], \"globalLocationId\": \"000006ZFMP\", \"jurisdiction\": \"FCC\", \"swcCertification\": \"Certified\", \"designVersion\": \"1\" }";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode design = mapper.readTree(json);
		String asrItemId="R00002034839";
		Map<String, Object> paramMap = new HashMap<>();
		ObjectNode originalDesign=(ObjectNode)design;
		Mockito.when( nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(null);
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,designStatus,
				designModifiedInd,offerName,design,asrItemId,paramMap,originalDesign,false,null,null,null,null, null,null);
	
		NxDesign nxDesign = new NxDesign();
		List<NxDesignDetails> nxDesignList= new ArrayList<>();
		NxDesignDetails nxDesignDetails = new NxDesignDetails();
		nxDesignDetails.setDesignData("{ \"siteId\": 99988948746, \"npanxx\": \"987654\", \"address1\": \"2051 MERCY DR\", \"city\": \"ORLANDO\", \"state\": \"FL\", \"macdType\": \"Change\", \"macdActivity\": \"Change Port Connection Speed;\", \"designSiteOfferPort\": [ { \"typeOfInventory\": \"From\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20182, \"udfAttributeText\": [ \"ORLDFLMA4VF\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20188, \"udfAttributeText\": [ \"ORLDFLMASD0\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200009, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200011, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200012, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfId\": 200019, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"udfAttributeText\": [ \"1 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300360 ], \"udfId\": 200030, \"udfAttributeText\": [ \"U\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300364 ], \"udfId\": 200033, \"udfAttributeText\": [ \"1 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 300378 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, (1000 Base LX) Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"7\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"7\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfAttributeId\": [ 55042 ], \"udfId\": 200133, \"udfAttributeText\": [ \"100 Mb\" ] }, { \"udfId\": 200146, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301590 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KRE1\" ] } ] } ] }, { \"typeOfInventory\": \"To\", \"component\": [ { \"componentCodeId\": 10, \"componentCodeType\": \"Connection\", \"componentId\": 9270724, \"designDetails\": [ { \"udfAttributeId\": [ 30595 ], \"udfId\": 20030, \"udfAttributeText\": [ \"Primary\" ] }, { \"udfAttributeId\": [ 30515 ], \"udfId\": 20017, \"udfAttributeText\": [ \"AVPN\" ] } ] }, { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": [ 301475 ], \"udfId\": 20173, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20184, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 20169, \"udfAttributeText\": [ \"R00002034839\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 301473 ], \"udfId\": 20171, \"udfAttributeText\": [ \"Fiber\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300303 ], \"udfId\": 20013, \"udfAttributeText\": [ \"Interactive (Profile 4)\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300248 ], \"udfId\": 200006, \"udfAttributeText\": [ \"LC/VLAN-level\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 300251 ], \"udfId\": 200008, \"udfAttributeText\": [ \"Change\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200009, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300260 ], \"udfId\": 200010, \"udfAttributeText\": [ \"Change Port Connection Speed\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200011, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200012, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 30605 ], \"udfId\": 200013, \"udfAttributeText\": [ \"Yes\" ] }, { \"udfAttributeId\": [ 300273 ], \"udfId\": 200015, \"udfAttributeText\": [ \"IN-SERVICE\" ] }, { \"udfAttributeId\": [ 300277 ], \"udfId\": 200018, \"udfAttributeText\": [ \"Existing\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"udfAttributeText\": [ \"IR/IF End-User Customer\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 300295 ], \"udfId\": 200021, \"udfAttributeText\": [ \"10 Gb\" ] }, { \"udfAttributeId\": [ 301475 ], \"udfId\": 200022, \"udfAttributeText\": [ \"SGOS\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200027, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 74933 ], \"udfId\": 200031, \"udfAttributeText\": [ \"250 Mb\" ] }, { \"udfId\": 200032, \"udfAttributeText\": [ \"0\" ] }, { \"udfAttributeId\": [ 300365 ], \"udfId\": 200033, \"udfAttributeText\": [ \"10 G\" ] }, { \"udfAttributeId\": [ 300367 ], \"udfId\": 200035, \"udfAttributeText\": [ \"Inside\" ] }, { \"udfAttributeId\": [ 300371 ], \"udfId\": 200036, \"udfAttributeText\": [ \"Wall\" ] }, { \"udfAttributeId\": [ 300373 ], \"udfId\": 200037, \"udfAttributeText\": [ \"AC Single\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 300377 ], \"udfId\": 200040, \"udfAttributeText\": [ \"02LNF.A02, 10G Base LR SMF Optical\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200048, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 300401 ], \"udfId\": 200058, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 55064 ], \"udfId\": 200059, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200060, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200075, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200079, \"udfAttributeText\": [ \"N\" ] }, { \"udfId\": 200007, \"udfAttributeText\": [ \"22/KRFN/233333/SD\" ] }, { \"udfId\": 200014, \"udfAttributeText\": [ \"2020-07-08 00:00:00.0\" ] }, { \"udfId\": 200017, \"udfAttributeText\": [ \"Recap\" ] }, { \"udfId\": 200045, \"udfAttributeText\": [ \"ORLDFLMA\" ] }, { \"udfId\": 200046, \"udfAttributeText\": [ \"10\" ] }, { \"udfId\": 200047, \"udfAttributeText\": [ \"10\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 67863 ], \"udfId\": 200133, \"udfAttributeText\": [ \"2500 Mb\" ] }, { \"udfAttributeId\": [ 301507 ], \"udfId\": 200134, \"udfAttributeText\": [ \"9STATES\" ] }, { \"udfAttributeId\": [ 604699 ], \"udfId\": 200145, \"udfAttributeText\": [ \"COMPLEX_MACDIII\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22019, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22020, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 22021, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21860, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 302216 ], \"udfId\": 21861, \"udfAttributeText\": [ \"Certified\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 55065 ], \"udfId\": 21862, \"udfAttributeText\": [ \"N\" ] }, { \"udfAttributeId\": [ 605332 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Green\" ] }, { \"udfId\": 21961, \"udfAttributeText\": [ \"1.37\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfId\": 20187, \"udfAttributeText\": [ \"02LNF.A02\" ] }, { \"udfAttributeId\": [ 301607 ], \"udfId\": 200143, \"udfAttributeText\": [ \"KSED\" ] } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 99988948746, \"componentType\": \"Site\", \"componentParentId\": 6511617, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [] }, { \"componentId\": 9270724, \"componentType\": \"Port\", \"componentParentId\": 99988948746, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 8000, \"targetListPrice\": 8000, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 8000, \"targetNetPrice\": 8000, \"localTotalPrice\": 8000, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - 12\", \"priceInUSD\": \"8000\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEMXG\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 15750, \"targetListPrice\": 15750, \"priceType\": \"PORT\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 15750, \"targetNetPrice\": 15750, \"localTotalPrice\": 15750, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Port\", \"priceName\": \"OEM_Port - 10 Gb - NRC\", \"priceInUSD\": \"15750\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Port\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 6382, \"targetListPrice\": 6382, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 6382, \"targetNetPrice\": 6382, \"localTotalPrice\": 6382, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - 12\", \"priceInUSD\": \"6382\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" }, { \"productRateId\": 0, \"beid\": \"OEM25\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 150, \"targetListPrice\": 150, \"priceType\": \"COS\", \"priceUnit\": \"Month\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 150, \"targetNetPrice\": 150, \"localTotalPrice\": 150, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"Cos\", \"priceName\": \"OEM_Interactive - 2500 Mb - NRC\", \"priceInUSD\": \"150\", \"priceScenarioId\": 99999908428, \"rateGroup\": \"OEM_Interactive\", \"priceCompType\": \"ASE\" } ] } ] }, \"siteName\": \"loc1\", \"asrItemId\": \"R00002034839\", \"lataCode\": \"458\", \"zipCode\": \"36740\", \"endPointSiteIdentifier\": \"A\", \"regionCode\": \"Y\", \"quantity\": \"1\", \"designStatus\": \"N\", \"alias\": \"loc1\", \"lconDetails\": [ {} ], \"globalLocationId\": \"000006ZFMP\", \"jurisdiction\": \"FCC\", \"swcCertification\": \"Certified\", \"designVersion\": \"1\" }");
		nxDesignList.add(nxDesignDetails);
		nxDesign.setNxDesignDetails(nxDesignList);
		Mockito.when( nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,"R",
				"Y","ASE",design,asrItemId,paramMap,originalDesign,false,null,null,null,null, null,null);
		
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,"U",
				"Y","ASE",design,asrItemId,paramMap,originalDesign,false,null,null,null,null, null,null);
		
	}
	

	@Test
	public void testSaveDBADE() throws IOException {
		NxSolutionDetail nxSolutionDetail = null;
		String userId = "userId";
		String userFirstName="userfirstName";
		String userLastName="userLastName";
		String designStatus="U"; 
		String designModifiedInd="Y"; 
		String offerName="ADE";
		String asrItemId="R00002034839";
		Map<String, Object> paramMap = new HashMap<>();
		
		String json1 = "{ \"component\": [ { \"componentCodeId\": 1210, \"componentCodeType\": \"Circuit\", \"componentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [], \"udfId\": 200182, \"udfAttributeText\": [ \"N/A\" ] }, { \"udfAttributeId\": [], \"udfId\": 200188, \"udfAttributeText\": [ \"OKGS\" ] }, { \"udfAttributeId\": [], \"udfId\": 200189, \"udfAttributeText\": [ \"100\" ] }, { \"udfAttributeId\": [], \"udfId\": 20186, \"udfAttributeText\": [ \"OK--\" ] }, { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [ 301770 ], \"udfId\": 200163, \"udfAttributeText\": [ \"Add\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200168, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200184, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200170, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200180, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301773 ], \"udfId\": 200164, \"udfAttributeText\": [ \"Newstart Circuit\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200167, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200185, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"NC\" ] }, { \"udfAttributeId\": [], \"udfId\": 200172, \"udfAttributeText\": [ \"1\" ] }, { \"udfAttributeId\": [], \"udfId\": 200198, \"udfAttributeText\": [ \"3\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [], \"udfId\": 200162, \"udfAttributeText\": [ \"AD1036566\" ] }, { \"udfAttributeId\": [], \"udfId\": 20781, \"udfAttributeText\": [ \"6\" ] }, { \"udfAttributeId\": [ 302220 ], \"udfId\": 200193, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] } ], \"references\": [] }, { \"componentCodeId\": 1220, \"componentCodeType\": \"Endpoint\", \"componentId\": 98413, \"parentComponentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [], \"udfId\": 20187, \"udfAttributeText\": [ \"02OTF.202\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200212, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 304240 ], \"udfId\": 200208, \"udfAttributeText\": [ null ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200213, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301833 ], \"udfId\": 200179, \"udfAttributeText\": [ \"1310 - SR1 Single Mode Fiber (SMF)\" ] }, { \"udfAttributeId\": [ 301806 ], \"udfId\": 200175, \"udfAttributeText\": [ \"IR / IF End-User Customer\" ] }, { \"udfAttributeId\": [ 301848 ], \"udfId\": 200205, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200218, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301823 ], \"udfId\": 200178, \"udfAttributeText\": [ \"Unprotected\" ] }, { \"udfAttributeId\": [ 301890 ], \"udfId\": 200217, \"udfAttributeText\": [ \"End-User Customer\" ] }, { \"udfAttributeId\": [ 605334 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Red\" ] }, { \"udfAttributeId\": [ 301476 ], \"udfId\": 21962, \"udfAttributeText\": [ \"TRUE\" ] }, { \"udfAttributeId\": [], \"udfId\": 21961, \"udfAttributeText\": [ \"1.35\" ] }, { \"udfAttributeId\": [], \"udfId\": 21033, \"udfAttributeText\": [ \"A\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"NC\" ] }, { \"udfAttributeId\": [], \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 1\" ] }, { \"udfAttributeId\": [], \"udfId\": 21036, \"udfAttributeText\": [ \"GREEN\" ] }, { \"udfAttributeId\": [], \"udfId\": 200160, \"udfAttributeText\": [ \"CHCJILLFH00\" ] }, { \"udfAttributeId\": [], \"udfId\": 200045, \"udfAttributeText\": [ \"CHCGILLW\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] } ], \"references\": [ { \"referenceType\": \"Site\", \"referenceId\": 99995150542 } ] }, { \"componentCodeId\": 1220, \"componentCodeType\": \"Endpoint\", \"componentId\": 98414, \"parentComponentId\": 52655, \"designDetails\": [ { \"udfAttributeId\": [ 343047 ], \"udfId\": 21085, \"udfAttributeText\": [ \"Interstate/Intrastate USOC\" ] }, { \"udfAttributeId\": [], \"udfId\": 20187, \"udfAttributeText\": [ \"02OTF.202\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200212, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301794 ], \"udfId\": 200174, \"udfAttributeText\": [ \"OTU2 (10 Gbps)\" ] }, { \"udfAttributeId\": [ 301845 ], \"udfId\": 200216, \"udfAttributeText\": [ \"Y\" ] }, { \"udfAttributeId\": [ 304240 ], \"udfId\": 200208, \"udfAttributeText\": [ null ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200213, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301833 ], \"udfId\": 200179, \"udfAttributeText\": [ \"1310 - SR1 Single Mode Fiber (SMF)\" ] }, { \"udfAttributeId\": [ 301806 ], \"udfId\": 200175, \"udfAttributeText\": [ \"IR / IF End-User Customer\" ] }, { \"udfAttributeId\": [ 301848 ], \"udfId\": 200205, \"udfAttributeText\": [ \"IF\" ] }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200218, \"udfAttributeText\": [ \"No\" ] }, { \"udfAttributeId\": [ 301823 ], \"udfId\": 200178, \"udfAttributeText\": [ \"Unprotected\" ] }, { \"udfAttributeId\": [ 301890 ], \"udfId\": 200217, \"udfAttributeText\": [ \"End-User Customer\" ] }, { \"udfAttributeId\": [], \"udfId\": 21034, \"udfAttributeText\": [ \"Z\" ] }, { \"udfAttributeId\": [ 605334 ], \"udfId\": 21960, \"udfAttributeText\": [ \"Red\" ] }, { \"udfAttributeId\": [ 605339 ], \"udfId\": 21962, \"udfAttributeText\": [ \"FALSE\" ] }, { \"udfAttributeId\": [], \"udfId\": 21961, \"udfAttributeText\": [ \"0.62\" ] }, { \"udfAttributeId\": [], \"udfId\": 200118, \"udfAttributeText\": [ \"SC\" ] }, { \"udfAttributeId\": [], \"udfId\": 1000360, \"udfAttributeText\": [ \"Tier 3\" ] }, { \"udfAttributeId\": [], \"udfId\": 21037, \"udfAttributeText\": [ \"YELLOW\" ] }, { \"udfAttributeId\": [], \"udfId\": 200160, \"udfAttributeText\": [ \"CHCGILWBHAM\" ] }, { \"udfAttributeId\": [], \"udfId\": 200045, \"udfAttributeText\": [ \"CHCGILWB\" ] }, { \"udfAttributeId\": [], \"udfId\": 200192, \"udfAttributeText\": [ \"32358\" ] }, { \"udfAttributeId\": [ 301820 ], \"udfId\": 200176, \"udfAttributeText\": [ \"Interstate (FCC) Access (Interstate)\" ] }, { \"udfAttributeId\": [ 301784 ], \"udfId\": 200169, \"udfAttributeText\": [ \"12 Months\" ] } ], \"references\": [ { \"referenceType\": \"Site\", \"referenceId\": 99995150544 } ] } ], \"designStatus\": \"N\", \"priceDetails\": { \"componentDetails\": [ { \"componentId\": 52655, \"componentType\": \"Circuit\", \"componentParentId\": 2449960, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Administrative Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 14.4, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Administrative Charge\", \"requestedDiscount\": 0, \"requestedRate\": 60, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-ORCMX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 60, \"targetListPrice\": 60, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Administrative Charge - Per Order\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 60, \"targetNetPrice\": 60, \"localTotalPrice\": 60, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Administrative Charge  - NRC\", \"priceInUSD\": \"60\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Administrative Charge\", \"requestedDiscount\": 0, \"requestedRate\": 60, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Design Central Office Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 144, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Design Central Office Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBCL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 600, \"targetListPrice\": 600, \"priceType\": \"CIRCUIT\", \"priceUnit\": \"Design Central Office Connection Charge - Per Circuit\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 600, \"targetNetPrice\": 600, \"localTotalPrice\": 600, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Design Central Office Connection Charge  - NRC\", \"priceInUSD\": \"600\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Design Central Office Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] }, { \"componentId\": 98413, \"componentType\": \"Endpoint\", \"componentParentId\": 52655, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Customer Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 360, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Port Connection\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 98, \"requestedRate\": 258.5, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] }, { \"componentId\": 98414, \"componentType\": \"Endpoint\", \"componentParentId\": 52655, \"componentAttributes\": [], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Customer Connection Charge\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 76, \"requestedRate\": 360, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-NRBBL\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 1500, \"targetListPrice\": 1500, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Customer Connection Charge\", \"frequency\": \"NRC\", \"quantity\": \"1\", \"localNetPrice\": 1500, \"targetNetPrice\": 1500, \"localTotalPrice\": 1500, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Customer Connection Charge  - NRC\", \"priceInUSD\": \"1500\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Customer Connection Charge\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832866, \"rateGroup\": \"Port Connection\", \"priceModifiedInd\": \"Y\", \"requestedDiscount\": 98, \"requestedRate\": 258.5, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832865, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 }, { \"productRateId\": 0, \"beid\": \"EYXCX-EYFOX\", \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 12925, \"targetListPrice\": 12925, \"priceType\": \"PORT_CONNECTION\", \"priceUnit\": \"Port Connection\", \"frequency\": \"MRC\", \"quantity\": \"1\", \"localNetPrice\": 12925, \"targetNetPrice\": 12925, \"localTotalPrice\": 12925, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"priceName\": \"Port Connection Type - OTU2 / OTU2e (10Gbps) - 12M\", \"priceInUSD\": \"12925\", \"priceScenarioId\": 99999832864, \"rateGroup\": \"Port Connection\", \"requestedDiscount\": 0, \"requestedRate\": 0, \"term\": 12 } ] } ] }, \"designVersion\": \"1\" }";
		ObjectMapper mapper = new ObjectMapper();

		JsonNode aDEDesign = mapper.readTree(json1);
		NxDesign nxDesign2 = new NxDesign();
		nxDesign2.setDesignVersion(1L);
		List<NxDesignDetails> nxDesignList2= new ArrayList<>();
		NxDesignDetails nxDesignDetails2 = new NxDesignDetails();
		nxDesignDetails2.setDesignData("{\"typeOfInventory\":null,\"component\":[{\"componentCodeId\":1210,\"fromInvYN\":null,\"logicalChannelPvcID\":null,\"eteVpnKey\":null,\"diversityGroupId\":null,\"componentCodeType\":\"Circuit\",\"componentId\":30962,\"externalField\":null,\"parentComponentId\":null,\"externalKeyRef\":null,\"mvlInd\":null,\"userEnteredVpn\":null,\"siteId\":null,\"logicalChannelId\":null,\"designDetails\":[{\"udfAttributeId\":[],\"udfId\":200188,\"readOnly\":null,\"udfAttributeText\":[\"OKGS\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200189,\"readOnly\":null,\"udfAttributeText\":[\"100\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":20186,\"readOnly\":null,\"udfAttributeText\":[\"OK--\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[343047],\"udfId\":21085,\"readOnly\":null,\"udfAttributeText\":[\"Interstate/Intrastate USOC\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200118,\"readOnly\":null,\"udfAttributeText\":[\"IL\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200162,\"readOnly\":null,\"udfAttributeText\":[\"AD1030947\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301770],\"udfId\":200163,\"readOnly\":null,\"udfAttributeText\":[\"Add\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301773],\"udfId\":200164,\"readOnly\":null,\"udfAttributeText\":[\"Newstart Circuit\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200167,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200168,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301785],\"udfId\":200169,\"readOnly\":null,\"udfAttributeText\":[\"24 Months\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200170,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200172,\"readOnly\":null,\"udfAttributeText\":[\"1\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301794],\"udfId\":200174,\"readOnly\":null,\"udfAttributeText\":[\"OTU2 (10 Gbps)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301820],\"udfId\":200176,\"readOnly\":null,\"udfAttributeText\":[\"Interstate (FCC) Access (Interstate)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200180,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200184,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200185,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30605],\"udfId\":200190,\"readOnly\":null,\"udfAttributeText\":[\"Yes\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301845],\"udfId\":200216,\"readOnly\":null,\"udfAttributeText\":[\"Y\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200198,\"readOnly\":null,\"udfAttributeText\":[\"4\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":20781,\"readOnly\":null,\"udfAttributeText\":[\"6\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[302220],\"udfId\":200193,\"readOnly\":null,\"udfAttributeText\":[\"Y\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200192,\"readOnly\":null,\"udfAttributeText\":[\"37745\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null}],\"routeTargets\":null,\"references\":[],\"siteObj\":null},{\"componentCodeId\":1220,\"fromInvYN\":null,\"logicalChannelPvcID\":null,\"eteVpnKey\":null,\"diversityGroupId\":null,\"componentCodeType\":\"Endpoint\",\"componentId\":47095,\"externalField\":null,\"parentComponentId\":30962,\"externalKeyRef\":null,\"mvlInd\":null,\"userEnteredVpn\":null,\"siteId\":null,\"logicalChannelId\":null,\"designDetails\":[{\"udfAttributeId\":[343047],\"udfId\":21085,\"readOnly\":null,\"udfAttributeText\":[\"Interstate/Intrastate USOC\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":20187,\"readOnly\":null,\"udfAttributeText\":[\"02OTF.202\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200118,\"readOnly\":null,\"udfAttributeText\":[\"IL\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301794],\"udfId\":200174,\"readOnly\":null,\"udfAttributeText\":[\"OTU2 (10 Gbps)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301806],\"udfId\":200175,\"readOnly\":null,\"udfAttributeText\":[\"IR / IF End-User Customer\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301823],\"udfId\":200178,\"readOnly\":null,\"udfAttributeText\":[\"Unprotected\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301833],\"udfId\":200179,\"readOnly\":null,\"udfAttributeText\":[\"1310 - SR1 Single Mode Fiber (SMF)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301848],\"udfId\":200205,\"readOnly\":null,\"udfAttributeText\":[\"IF\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[304240],\"udfId\":200208,\"readOnly\":null,\"udfAttributeText\":[null],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200212,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200213,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301845],\"udfId\":200216,\"readOnly\":null,\"udfAttributeText\":[\"Y\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301890],\"udfId\":200217,\"readOnly\":null,\"udfAttributeText\":[\"End-User Customer\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200218,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21034,\"readOnly\":null,\"udfAttributeText\":[\"Z\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[605334],\"udfId\":21960,\"readOnly\":null,\"udfAttributeText\":[],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21961,\"readOnly\":null,\"udfAttributeText\":[\"0.62\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[605339],\"udfId\":21962,\"readOnly\":null,\"udfAttributeText\":[],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":1000360,\"readOnly\":null,\"udfAttributeText\":[\"Tier 4\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21037,\"readOnly\":null,\"udfAttributeText\":[\"YELLOW\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200160,\"readOnly\":null,\"udfAttributeText\":[\"CHCGILWBHAM\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200045,\"readOnly\":null,\"udfAttributeText\":[\"CHCGILWB\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200192,\"readOnly\":null,\"udfAttributeText\":[\"37745\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301820],\"udfId\":200176,\"readOnly\":null,\"udfAttributeText\":[\"Interstate (FCC) Access (Interstate)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301785],\"udfId\":200169,\"readOnly\":null,\"udfAttributeText\":[\"24 Months\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null}],\"routeTargets\":null,\"references\":[{\"referenceType\":\"Site\",\"referenceId\":99988939544}],\"siteObj\":{\"nxSiteId\":455875,\"siteId\":99988939544,\"npanxx\":\"889988\",\"address1\":\"315 E ROBINSON ST\",\"city\":\"CHGO\",\"state\":\"IL\",\"saLecName\":null,\"speedId\":null,\"saLecSwClli\":null,\"popClli\":null,\"country\":\"US\",\"macdType\":\"Add\",\"macdActivity\":\"Newstart Circuit\",\"fromInventory\":null,\"dualSiteId\":null,\"onNetCheck\":null,\"ethernetVendor\":null,\"designSiteOfferPort\":null,\"priceDetails\":null,\"address\":null,\"postalCode\":null,\"siteName\":\"L2A\",\"swcClli\":\"CHCGILWB\",\"customerLocationClli\":\"CHCGILWBHAM\",\"active\":null,\"emc\":null,\"carrierHotel\":null,\"attComments\":null,\"newBuilding\":null,\"customerReference\":null,\"asrItemId\":\"AD1030946\",\"lataCode\":\"358\",\"zipCode\":\"6060\",\"address2\":null,\"room\":null,\"floor\":null,\"building\":null,\"siteComment\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null,\"endPointSiteIdentifier\":\"Z\",\"buildingClli\":null,\"regionCode\":\"Y\",\"activityType\":\"New Request\",\"cancellationReason\":null,\"product\":null,\"quantity\":\"1\",\"nssEngagement\":null,\"designStatus\":\"U\",\"multiGigeIndicator\":null,\"alias\":\"L2A\",\"macdActionType\":null,\"lconDetails\":[{\"lconType\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null}],\"globalLocationId\":\"00010L70GG\",\"jurisdiction\":\"Interstate (FCC) Access (Interstate)\",\"certificationStatus\":null,\"designModifiedInd\":null,\"independentCarrierCompanyLATA\":null,\"independentCarrierCompanyName\":null,\"interDepartmentMeetPointChecklistURL\":null,\"diverseFromReferenceInfo\":null,\"opticalTerminatingNetworkCarrierFacilityAssignment\":null,\"collocationCarrierFacilityAssignment\":null,\"assetInvestmentSheetIndicator\":null,\"swcCertification\":\"Certified with Caveats\",\"designVersion\":\"1\",\"specialConstructionPaymentUrl\":null,\"thirdPartyInd\":null,\"accessCarrierNameAbbreviation\":null,\"design\":null,\"loopLength\":null,\"numOfCopperRepeaters\":null,\"inventoryNumOfPairs\":null,\"taskClli\":null,\"numberRemoteTerminals\":null,\"referenceOfferId\":null,\"siteNpanxx\":null,\"specialConstructionCharge\":null,\"specialConstructionHandling\":null,\"specialConstructionHandlingNotes\":null,\"_endPointRef\":21034}},{\"componentCodeId\":1220,\"fromInvYN\":null,\"logicalChannelPvcID\":null,\"eteVpnKey\":null,\"diversityGroupId\":null,\"componentCodeType\":\"Endpoint\",\"componentId\":47096,\"externalField\":null,\"parentComponentId\":30962,\"externalKeyRef\":null,\"mvlInd\":null,\"userEnteredVpn\":null,\"siteId\":null,\"logicalChannelId\":null,\"designDetails\":[{\"udfAttributeId\":[343047],\"udfId\":21085,\"readOnly\":null,\"udfAttributeText\":[\"Interstate/Intrastate USOC\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":20187,\"readOnly\":null,\"udfAttributeText\":[\"02OTF.202\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200118,\"readOnly\":null,\"udfAttributeText\":[\"IL\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301794],\"udfId\":200174,\"readOnly\":null,\"udfAttributeText\":[\"OTU2 (10 Gbps)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301806],\"udfId\":200175,\"readOnly\":null,\"udfAttributeText\":[\"IR / IF End-User Customer\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301823],\"udfId\":200178,\"readOnly\":null,\"udfAttributeText\":[\"Unprotected\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301833],\"udfId\":200179,\"readOnly\":null,\"udfAttributeText\":[\"1310 - SR1 Single Mode Fiber (SMF)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301848],\"udfId\":200205,\"readOnly\":null,\"udfAttributeText\":[\"IF\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[304240],\"udfId\":200208,\"readOnly\":null,\"udfAttributeText\":[null],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200212,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200213,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301845],\"udfId\":200216,\"readOnly\":null,\"udfAttributeText\":[\"Y\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301890],\"udfId\":200217,\"readOnly\":null,\"udfAttributeText\":[\"End-User Customer\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[30604],\"udfId\":200218,\"readOnly\":null,\"udfAttributeText\":[\"No\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21033,\"readOnly\":null,\"udfAttributeText\":[\"A\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[605334],\"udfId\":21960,\"readOnly\":null,\"udfAttributeText\":[],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21961,\"readOnly\":null,\"udfAttributeText\":[\"1.35\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301476],\"udfId\":21962,\"readOnly\":null,\"udfAttributeText\":[],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":1000360,\"readOnly\":null,\"udfAttributeText\":[\"Tier 1\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":21036,\"readOnly\":null,\"udfAttributeText\":[\"GREEN\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200160,\"readOnly\":null,\"udfAttributeText\":[\"CHCJILLFH00\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200045,\"readOnly\":null,\"udfAttributeText\":[\"CHCGILLW\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[],\"udfId\":200192,\"readOnly\":null,\"udfAttributeText\":[\"37745\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301820],\"udfId\":200176,\"readOnly\":null,\"udfAttributeText\":[\"Interstate (FCC) Access (Interstate)\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null},{\"udfAttributeId\":[301785],\"udfId\":200169,\"readOnly\":null,\"udfAttributeText\":[\"24 Months\"],\"defaultUdfAttributeId\":null,\"lovAttributeIdList\":null,\"udfValue\":null}],\"routeTargets\":null,\"references\":[{\"referenceType\":\"Site\",\"referenceId\":99988939542}],\"siteObj\":{\"nxSiteId\":455876,\"siteId\":99988939542,\"npanxx\":\"889988\",\"address1\":\"1946 W IRVING PARK RD\",\"city\":\"CHGO\",\"state\":\"IL\",\"saLecName\":null,\"speedId\":null,\"saLecSwClli\":null,\"popClli\":null,\"country\":\"US\",\"macdType\":null,\"macdActivity\":null,\"fromInventory\":null,\"dualSiteId\":null,\"onNetCheck\":null,\"ethernetVendor\":null,\"designSiteOfferPort\":null,\"priceDetails\":null,\"address\":null,\"postalCode\":null,\"siteName\":\"L2Z\",\"swcClli\":\"CHCGILLW\",\"customerLocationClli\":\"CHCJILLFH00\",\"active\":null,\"emc\":null,\"carrierHotel\":null,\"attComments\":null,\"newBuilding\":null,\"customerReference\":null,\"asrItemId\":null,\"lataCode\":\"358\",\"zipCode\":\"60613\",\"address2\":null,\"room\":null,\"floor\":null,\"building\":null,\"siteComment\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null,\"endPointSiteIdentifier\":\"A\",\"buildingClli\":null,\"regionCode\":\"Y\",\"activityType\":null,\"cancellationReason\":null,\"product\":null,\"quantity\":null,\"nssEngagement\":null,\"designStatus\":null,\"multiGigeIndicator\":null,\"alias\":\"L2Z\",\"macdActionType\":null,\"lconDetails\":[{\"lconType\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null}],\"globalLocationId\":null,\"jurisdiction\":null,\"certificationStatus\":null,\"designModifiedInd\":null,\"independentCarrierCompanyLATA\":null,\"independentCarrierCompanyName\":null,\"interDepartmentMeetPointChecklistURL\":null,\"diverseFromReferenceInfo\":null,\"opticalTerminatingNetworkCarrierFacilityAssignment\":null,\"collocationCarrierFacilityAssignment\":null,\"assetInvestmentSheetIndicator\":null,\"swcCertification\":null,\"designVersion\":null,\"specialConstructionPaymentUrl\":null,\"thirdPartyInd\":null,\"accessCarrierNameAbbreviation\":null,\"design\":null,\"loopLength\":null,\"numOfCopperRepeaters\":null,\"inventoryNumOfPairs\":null,\"taskClli\":null,\"numberRemoteTerminals\":null,\"referenceOfferId\":null,\"siteNpanxx\":null,\"specialConstructionCharge\":null,\"specialConstructionHandling\":null,\"specialConstructionHandlingNotes\":null,\"_endPointRef\":21033}}],\"designStatus\":\"U\",\"cancellationReason\":null,\"priceDetails\":{\"componentDetails\":[{\"componentCodeId\":null,\"componentCodeType\":null,\"componentId\":30962,\"componentType\":\"Circuit\",\"componentParentId\":6900237,\"componentAttributes\":[],\"priceAttributes\":[{\"productRateId\":0,\"beid\":\"EYXCX-ORCMX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":60.0,\"targetListPrice\":60.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Administrative Charge - Per Order\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":60.0,\"targetNetPrice\":60.0,\"localTotalPrice\":60.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Administrative Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"60\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Administrative Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-ORCMX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":60.0,\"targetListPrice\":60.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Administrative Charge - Per Order\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":60.0,\"targetNetPrice\":60.0,\"localTotalPrice\":60.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Administrative Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"60\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Administrative Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-ORCMX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":60.0,\"targetListPrice\":60.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Administrative Charge - Per Order\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":60.0,\"targetNetPrice\":60.0,\"localTotalPrice\":60.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Administrative Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"60\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Administrative Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBCL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":600.0,\"targetListPrice\":600.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Design Central Office Connection Charge - Per Circuit\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":600.0,\"targetNetPrice\":600.0,\"localTotalPrice\":600.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Design Central Office Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"600\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Design Central Office Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBCL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":600.0,\"targetListPrice\":600.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Design Central Office Connection Charge - Per Circuit\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":600.0,\"targetNetPrice\":600.0,\"localTotalPrice\":600.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Design Central Office Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"600\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Design Central Office Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBCL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":600.0,\"targetListPrice\":600.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"CIRCUIT\",\"priceUnit\":\"Design Central Office Connection Charge - Per Circuit\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":600.0,\"targetNetPrice\":600.0,\"localTotalPrice\":600.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Design Central Office Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"600\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Design Central Office Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null}],\"scpPriceMessages\":null},{\"componentCodeId\":null,\"componentCodeType\":null,\"componentId\":47095,\"componentType\":\"Endpoint\",\"componentParentId\":30962,\"componentAttributes\":[],\"priceAttributes\":[{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null}],\"scpPriceMessages\":null},{\"componentCodeId\":null,\"componentCodeType\":null,\"componentId\":47096,\"componentType\":\"Endpoint\",\"componentParentId\":30962,\"componentAttributes\":[],\"priceAttributes\":[{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-NRBBL\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":1500.0,\"targetListPrice\":1500.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Customer Connection Charge\",\"frequency\":\"NRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":1500.0,\"targetNetPrice\":1500.0,\"localTotalPrice\":1500.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Customer Connection Charge  - NRC\",\"typeOfInventory\":null,\"priceInUSD\":\"1500\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Customer Connection Charge\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905738,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":\"Y\",\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905737,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null},{\"productRateId\":0,\"beid\":\"EYXCX-EYFOX\",\"rateDescription\":null,\"priceCatalog\":\"Standard Pricing\",\"localListPrice\":12100.0,\"targetListPrice\":12100.0,\"icbDesiredDiscPerc\":null,\"priceType\":\"PORT_CONNECTION\",\"priceUnit\":\"Port Connection\",\"frequency\":\"MRC\",\"monthlySurcharge\":null,\"discount\":null,\"discountId\":null,\"quantity\":\"1\",\"localNetPrice\":12100.0,\"targetNetPrice\":12100.0,\"localTotalPrice\":12100.0,\"targetTotalPrice\":null,\"localCurrency\":\"USD\",\"targetCurrency\":\"USD\",\"rdsPriceType\":null,\"priceName\":\"Port Connection Type - OTU2 / OTU2e (10Gbps) - 24M\",\"typeOfInventory\":null,\"priceInUSD\":\"12100\",\"priceScenarioId\":99999905736,\"rateGroup\":\"Port Connection\",\"externalBillingSystem\":null,\"ratePlanId\":null,\"priceCompType\":null,\"pvcId\":null,\"chargeCodeId\":null,\"requestedNRCRate\":null,\"requestedNRCDiscPercentage\":null,\"requestedMRCRate\":null,\"requestedMRCDiscPercentage\":null,\"priceModifiedInd\":null,\"requestedDiscount\":null,\"requestedRate\":null,\"term\":24,\"priceGroup\":null,\"referencePortId\":null,\"componentType\":null,\"componentParentId\":null,\"country\":null,\"secondaryKeys\":null,\"lineItemId\":null,\"nrcBeid\":null,\"uniqueId\":null,\"elementType\":null,\"reqPriceType\":null}],\"scpPriceMessages\":null}],\"priceMessage\":null},\"purchaseOrderNumber\":null,\"designModifiedInd\":null,\"designVersion\":1,\"icsc\":null,\"nssEngagement\":null,\"accessCarrierNameAbbreviation\":null,\"specialConstructionCharge\":null,\"specialConstructionHandling\":null,\"specialConstructionHandlingNotes\":null,\"site\":[{\"nxSiteId\":455875,\"siteId\":99988939544,\"npanxx\":\"889988\",\"address1\":\"315 E ROBINSON ST\",\"city\":\"CHGO\",\"state\":\"IL\",\"saLecName\":null,\"speedId\":null,\"saLecSwClli\":null,\"popClli\":null,\"country\":\"US\",\"macdType\":\"Add\",\"macdActivity\":\"Newstart Circuit\",\"fromInventory\":null,\"dualSiteId\":null,\"onNetCheck\":null,\"ethernetVendor\":null,\"designSiteOfferPort\":null,\"priceDetails\":null,\"address\":null,\"postalCode\":null,\"siteName\":\"L2A\",\"swcClli\":\"CHCGILWB\",\"customerLocationClli\":\"CHCGILWBHAM\",\"active\":null,\"emc\":null,\"carrierHotel\":null,\"attComments\":null,\"newBuilding\":null,\"customerReference\":null,\"asrItemId\":\"AD1030946\",\"lataCode\":\"358\",\"zipCode\":\"6060\",\"address2\":null,\"room\":null,\"floor\":null,\"building\":null,\"siteComment\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null,\"endPointSiteIdentifier\":\"Z\",\"buildingClli\":null,\"regionCode\":\"Y\",\"activityType\":\"New Request\",\"cancellationReason\":null,\"product\":null,\"quantity\":\"1\",\"nssEngagement\":null,\"designStatus\":\"U\",\"multiGigeIndicator\":null,\"alias\":\"L2A\",\"macdActionType\":null,\"lconDetails\":[{\"lconType\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null}],\"globalLocationId\":\"00010L70GG\",\"jurisdiction\":\"Interstate (FCC) Access (Interstate)\",\"certificationStatus\":null,\"designModifiedInd\":null,\"independentCarrierCompanyLATA\":null,\"independentCarrierCompanyName\":null,\"interDepartmentMeetPointChecklistURL\":null,\"diverseFromReferenceInfo\":null,\"opticalTerminatingNetworkCarrierFacilityAssignment\":null,\"collocationCarrierFacilityAssignment\":null,\"assetInvestmentSheetIndicator\":null,\"swcCertification\":\"Certified with Caveats\",\"designVersion\":\"1\",\"specialConstructionPaymentUrl\":null,\"thirdPartyInd\":null,\"accessCarrierNameAbbreviation\":null,\"design\":null,\"loopLength\":null,\"numOfCopperRepeaters\":null,\"inventoryNumOfPairs\":null,\"taskClli\":null,\"numberRemoteTerminals\":null,\"referenceOfferId\":null,\"siteNpanxx\":null,\"specialConstructionCharge\":null,\"specialConstructionHandling\":null,\"specialConstructionHandlingNotes\":null,\"_endPointRef\":21034},{\"nxSiteId\":455876,\"siteId\":99988939542,\"npanxx\":\"889988\",\"address1\":\"1946 W IRVING PARK RD\",\"city\":\"CHGO\",\"state\":\"IL\",\"saLecName\":null,\"speedId\":null,\"saLecSwClli\":null,\"popClli\":null,\"country\":\"US\",\"macdType\":null,\"macdActivity\":null,\"fromInventory\":null,\"dualSiteId\":null,\"onNetCheck\":null,\"ethernetVendor\":null,\"designSiteOfferPort\":null,\"priceDetails\":null,\"address\":null,\"postalCode\":null,\"siteName\":\"L2Z\",\"swcClli\":\"CHCGILLW\",\"customerLocationClli\":\"CHCJILLFH00\",\"active\":null,\"emc\":null,\"carrierHotel\":null,\"attComments\":null,\"newBuilding\":null,\"customerReference\":null,\"asrItemId\":null,\"lataCode\":\"358\",\"zipCode\":\"60613\",\"address2\":null,\"room\":null,\"floor\":null,\"building\":null,\"siteComment\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null,\"endPointSiteIdentifier\":\"A\",\"buildingClli\":null,\"regionCode\":\"Y\",\"activityType\":null,\"cancellationReason\":null,\"product\":null,\"quantity\":null,\"nssEngagement\":null,\"designStatus\":null,\"multiGigeIndicator\":null,\"alias\":\"L2Z\",\"macdActionType\":null,\"lconDetails\":[{\"lconType\":null,\"lconFirstName\":null,\"lconLastName\":null,\"lconPhone\":null,\"lconEmail\":null}],\"globalLocationId\":null,\"jurisdiction\":null,\"certificationStatus\":null,\"designModifiedInd\":null,\"independentCarrierCompanyLATA\":null,\"independentCarrierCompanyName\":null,\"interDepartmentMeetPointChecklistURL\":null,\"diverseFromReferenceInfo\":null,\"opticalTerminatingNetworkCarrierFacilityAssignment\":null,\"collocationCarrierFacilityAssignment\":null,\"assetInvestmentSheetIndicator\":null,\"swcCertification\":null,\"designVersion\":null,\"specialConstructionPaymentUrl\":null,\"thirdPartyInd\":null,\"accessCarrierNameAbbreviation\":null,\"design\":null,\"loopLength\":null,\"numOfCopperRepeaters\":null,\"inventoryNumOfPairs\":null,\"taskClli\":null,\"numberRemoteTerminals\":null,\"referenceOfferId\":null,\"siteNpanxx\":null,\"specialConstructionCharge\":null,\"specialConstructionHandling\":null,\"specialConstructionHandlingNotes\":null,\"_endPointRef\":21033}]}");
		nxDesignList2.add(nxDesignDetails2);
		nxDesign2.setNxDesignDetails(nxDesignList2);
		Mockito.when( nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign2);
		ObjectNode originalADEDesign=(ObjectNode)aDEDesign;
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,designStatus,
				designModifiedInd,offerName,aDEDesign,asrItemId,paramMap,originalADEDesign,false,null,null,null,null, null,null);
	
		
	}
	
	@Test
	public void testGenerateConsolidationKeyASENoDIR() throws IOException {
		String json1 = "{ \"nxSiteId\": 459094, \"siteId\": 99988917977, \"npanxx\": \"843577\", \"address1\": \"230 KING ST\", \"city\": \"CHARLESTON\", \"state\": \"SC\", \"country\": \"US\", \"macdType\": \"Add\", \"macdActivity\": \"New Start UNI/Port\", \"designSiteOfferPort\": [ { \"macdActivityType\": null, \"component\": [ { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": null, \"udfId\": 20169, \"readOnly\": null, \"udfAttributeText\": [ \"100000911661\" ], \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300302 ], \"udfId\": 20013, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300249 ], \"udfId\": 200006, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300250 ], \"udfId\": 200008, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 302000, 302000 ], \"udfId\": 200010, \"readOnly\": null,\r\n" + 
				" \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300362 ], \"udfId\": 200133, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentCodeId\": null, \"componentCodeType\": null, \"componentId\": 99988917977, \"componentType\": \"Site\", \"componentParentId\": 6912712, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": null, \"scpPriceMessages\": null }, { \"componentCodeId\": null, \"componentCodeType\": null, \"componentId\": 10852136, \"componentType\": \"Port\", \"componentParentId\": 99988917977, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMMC\", \"rateDescription\": null, \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 5.0, \"targetListPrice\": null, \"icbDesiredDiscPerc\": null, \"priceType\": \"PORT_MAC\", \"priceUnit\": \"Monthly\", \"frequency\": \"MRC\", \r\n" + 
				" \"monthlySurcharge\": null, \"discount\": null, \"discountId\": null, \"quantity\": \"1\", \"localNetPrice\": null, \"targetNetPrice\": null, \"localTotalPrice\": null, \"targetTotalPrice\": null, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"PORT\", \"priceName\": \"Additional MAC Addresses (51 - 100)\", \"typeOfInventory\": null, \"priceInUSD\": null, \"priceScenarioId\": 6512817, \"rateGroup\": \"OEM_Port\", \"externalBillingSystem\": null, \"ratePlanId\": null, \"priceCompType\": \"ASE\", \"pvcId\": null, \"chargeCodeId\": null, \"requestedNRCRate\": null, \"requestedNRCDiscPercentage\": null, \"requestedMRCRate\": null, \"requestedMRCDiscPercentage\": null, \"priceModifiedInd\": null, \"requestedDiscount\": null, \"requestedRate\": null, \"term\": null, \"priceGroup\": null, \"referencePortId\": null, \"componentType\": null, \"componentParentId\": null, \"country\": null, \"secondaryKeys\": null, \"lineItemId\": null, \"nrcBeid\": null, \"uniqueId\": null, \"elementType\": null, \"reqPriceType\": null } ], \"scpPriceMessages\": null } ], \"priceMessage\": null }, \"asrItemId\": \"100000911661\", \"lataCode\": \"436\", \"zipCode\": \"29401\", \"endPointSiteIdentifier\": \"A\", \"product\": \"ASEoD\", \"quantity\": \"1\", \"nssEngagement\": null, \"designStatus\": \"N\", \"multiGigeIndicator\": null, \"alias\": \"site 1\", \"macdActionType\": null, \"globalLocationId\": \"00001R1A49\", \"jurisdiction\": \"FCC - 9 States\", \"designModifiedInd\": \"Y\", \"swcCertification\": \"Certified\", \"designVersion\": 1, \"specialConstructionPaymentUrl\": null, \"thirdPartyInd\": \"N\" }";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode design=mapper.readTree(json1);;
		NxDesignDetails nxDesignDetails= new NxDesignDetails();
		NxDesign nxDesign = new NxDesign();
		nxDesignDetails.setNxDesign(nxDesign);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		nxDesign.setNxSolutionDetail(nxSolutionDetail);
		List<NxLookupData> rulesData=new ArrayList<>();
		NxLookupData nxLookupDataObj= new NxLookupData();
		nxLookupDataObj.setDatasetName("REST_V2_CONSOLIDATION_CRITERIA");
		nxLookupDataObj.setItemId("ASENoD/asenod_IR");
		nxLookupDataObj.setCriteria("{ \"productVariation_pf\": { \"type\": \"default\", \"value\": \"aSE_OD\" }, \"port_qty_pf\": { \"type\": \"inputPath\", \"value\": \"$.solution.contractType||$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==200008)].udfAttributeId.[*]\", \"dataSetName\": \"NX_LOOKUP_DATA|MP_ASENoD_PORTQUANTITY|New\" }, \"cIR_qty_pf\": { \"type\": \"inputPath\", \"value\": \"$.solution.contractType||$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==200008)].udfAttributeId.[*]\", \"dataSetName\": \"NX_LOOKUP_DATA|MP_ASENoD_PORTQUANTITY|New\" }, \"int_portConnectionSpeed_pf\": { \"type\": \"inputPath\", \"value\": \"$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==200021)].udfAttributeId.[*]##$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==20171)].udfAttributeId.[*]\", \"dataSetName\": \"NX_LOOKUP_DATA|mp_ase_portConnectionSpeed|null\" }, \"int_cIRSpeed_pf\": { \"type\": \"inputPath\", \"value\": \"$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==200133)].udfAttributeId.[*]\", \"dataSetName\": \"NX_LOOKUP_DATA|mp_ase_cirSpeed\" }, \"int_Jurisdiction_pf\": { \"type\": \"custom\", \"inputPathValue\": \"$..state\" }, \"int_classOfService_pf\": { \"type\": \"inputPath\", \"value\": \"$..component.[?(@.componentCodeId==30)].designDetails.[?(@.udfId==20013)].udfAttributeId.[*]\", \"dataSetName\": \"NX_LOOKUP_DATA|mp_ase_cosPackage\" }, \"usocId\": { \"type\": \"customConfigRule\", \"value\": \"$..priceAttributes.[?((@.priceScenarioId == %priceScenarioId%)  &&(@.rateGroup =='OEM_Port' || @.rateGroup == 'ICO_MEETPOINT' || @.rateGroup =='MEET_POINT' || @.rateGroup =='ALTSWITCH' || @.rateGroup =='OEM_Interactive' || @.rateGroup =='OEM_MMH' || @.rateGroup =='OEM_MMS' || @.rateGroup =='OEM_BusinessH_OOR' || @.rateGroup =='OEM_EFC'))]\" } }");
		rulesData.add(nxLookupDataObj);
		NexxusJsonUtility nj=new NexxusJsonUtility();
		Map  criteriaMap=nj.convertStringJsonToMap(nxLookupDataObj.getCriteria());;
		Mockito.when(nexxusJsonUtility.convertStringJsonToMap(any())).thenReturn(criteriaMap);
		Mockito.when(nxLookupDataRepository.findByDatasetNameAndItemIdAndDescription(anyString(),anyString(),anyString())).thenReturn(rulesData);
		Mockito.when(configAndUpdateRestUtilPd.processCustomFields(any(),any(),anyMap(),any())).thenReturn("derivedvalue");
		Mockito.when(restCommonUtil.processDataSetName(any(),any(),any())).thenReturn("derivedValue");
		Mockito.when(restCommonUtil.getItemValueUsingJsonPath(any(),any(),any())).thenReturn("itemValue");
		doNothing().when(configAndUpdateRestUtilPd).process3PAUcoIdFromLookup(anyMap());
		Map<String,Map<String,String>> result=new TreeMap<>();	
		Map<String,String> filedDataMap= new HashMap<>();
		filedDataMap.put("rateGroup", "OEM_Port");
		filedDataMap.put("priceType", "PORT_MAC");
		result.put("OEMMC",filedDataMap);
		Mockito.when(configAndUpdateRestUtilPd.createDataMapByUsocId(any(),anyMap(),anyString())).thenReturn(result);
		String usocIdCategor="New";
		Mockito.when(configAndUpdatePricingUtil.getUsocIdCategory(any(),any(),any(),any())).thenReturn(usocIdCategor);

		pedSnsdServiceUtilTest.generateConsolidationKey("ASENoD",design , nxDesignDetails,"576558");
	}
	
	@Test
	public void testGenerateConsolidationKeyASENoD3PA() throws IOException {
		String json1 = "{ \"nxSiteId\": 459094, \"siteId\": 99988917977, \"npanxx\": \"843577\", \"address1\": \"230 KING ST\", \"city\": \"CHARLESTON\", \"state\": \"SC\", \"country\": \"US\", \"macdType\": \"Add\", \"macdActivity\": \"New Start UNI/Port\", \"designSiteOfferPort\": [ { \"macdActivityType\": null, \"component\": [ { \"componentCodeId\": 30, \"componentCodeType\": \"Port\", \"designDetails\": [ { \"udfAttributeId\": null, \"udfId\": 20169, \"readOnly\": null, \"udfAttributeText\": [ \"100000911661\" ], \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300302 ], \"udfId\": 20013, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300249 ], \"udfId\": 200006, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300250 ], \"udfId\": 200008, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 302000, 302000 ], \"udfId\": 200010, \"readOnly\": null,\r\n" + 
				" \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 30604 ], \"udfId\": 200013, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300284 ], \"udfId\": 200020, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300294 ], \"udfId\": 200021, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null }, { \"udfAttributeId\": [ 300362 ], \"udfId\": 200133, \"readOnly\": null, \"udfAttributeText\": null, \"defaultUdfAttributeId\": null, \"lovAttributeIdList\": null, \"udfValue\": null } ] } ] } ], \"priceDetails\": { \"componentDetails\": [ { \"componentCodeId\": null, \"componentCodeType\": null, \"componentId\": 99988917977, \"componentType\": \"Site\", \"componentParentId\": 6912712, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": null, \"scpPriceMessages\": null }, { \"componentCodeId\": null, \"componentCodeType\": null, \"componentId\": 10852136, \"componentType\": \"Port\", \"componentParentId\": 99988917977, \"componentAttributes\": [ { \"componentFieldName\": \"Country\", \"componentFieldValue\": \"US\" } ], \"priceAttributes\": [ { \"productRateId\": 0, \"beid\": \"OEMMC\", \"rateDescription\": null, \"priceCatalog\": \"Standard Pricing\", \"localListPrice\": 5.0, \"targetListPrice\": null, \"icbDesiredDiscPerc\": null, \"priceType\": \"PORT_MAC\", \"priceUnit\": \"Monthly\", \"frequency\": \"MRC\", \r\n" + 
				" \"monthlySurcharge\": null, \"discount\": null, \"discountId\": null, \"quantity\": \"1\", \"localNetPrice\": null, \"targetNetPrice\": null, \"localTotalPrice\": null, \"targetTotalPrice\": null, \"localCurrency\": \"USD\", \"targetCurrency\": \"USD\", \"rdsPriceType\": \"PORT\", \"priceName\": \"Additional MAC Addresses (51 - 100)\", \"typeOfInventory\": null, \"priceInUSD\": null, \"priceScenarioId\": 6512817, \"rateGroup\": \"OEM_Port\", \"externalBillingSystem\": null, \"ratePlanId\": null, \"priceCompType\": \"ASE\", \"pvcId\": null, \"chargeCodeId\": null, \"requestedNRCRate\": null, \"requestedNRCDiscPercentage\": null, \"requestedMRCRate\": null, \"requestedMRCDiscPercentage\": null, \"priceModifiedInd\": null, \"requestedDiscount\": null, \"requestedRate\": null, \"term\": null, \"priceGroup\": null, \"referencePortId\": null, \"componentType\": null, \"componentParentId\": null, \"country\": null, \"secondaryKeys\": null, \"lineItemId\": null, \"nrcBeid\": null, \"uniqueId\": null, \"elementType\": null, \"reqPriceType\": null } ], \"scpPriceMessages\": null } ], \"priceMessage\": null }, \"asrItemId\": \"100000911661\", \"lataCode\": \"436\", \"zipCode\": \"29401\", \"endPointSiteIdentifier\": \"A\", \"product\": \"ASEoD\", \"quantity\": \"1\", \"nssEngagement\": null, \"designStatus\": \"N\", \"multiGigeIndicator\": null, \"alias\": \"site 1\", \"macdActionType\": null, \"globalLocationId\": \"00001R1A49\", \"jurisdiction\": \"FCC - 9 States\", \"designModifiedInd\": \"Y\", \"swcCertification\": \"Certified\", \"designVersion\": 1, \"specialConstructionPaymentUrl\": null, \"thirdPartyInd\": \"Y\" }";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode design=mapper.readTree(json1);;
		NxDesignDetails nxDesignDetails= new NxDesignDetails();
		NxDesign nxDesign = new NxDesign();
		nxDesignDetails.setNxDesign(nxDesign);
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		nxDesign.setNxSolutionDetail(nxSolutionDetail);
		List<NxLookupData> rulesData=new ArrayList<>();
		NxLookupData nxLookupDataObj= new NxLookupData();
		nxLookupDataObj.setDatasetName("REST_V2_CONSOLIDATION_CRITERIA");
		nxLookupDataObj.setItemId("ASENoD/asenod_IR");
		nxLookupDataObj.setCriteria("{\"productVariation_pf\": { \"type\": \"default\", \"value\": \"aSE_OD_3PA\" }, \"macdType_INT_pf\": { \"type\": \"inputPath\", \"value\": \"$..macdActivity\" },\"usocId\":{\"type\":\"customConfigRule\",\"value\":\"$..priceAttributes.[?((@.priceScenarioId == %priceScenarioId%))]\"}}");
		rulesData.add(nxLookupDataObj);
		NexxusJsonUtility nj=new NexxusJsonUtility();
		Map  criteriaMap=nj.convertStringJsonToMap(nxLookupDataObj.getCriteria());;
		Mockito.when(nexxusJsonUtility.convertStringJsonToMap(any())).thenReturn(criteriaMap);
		Mockito.when(nxLookupDataRepository.findByDatasetNameAndItemIdAndDescription(anyString(),anyString(),anyString())).thenReturn(rulesData);
		Mockito.when(restCommonUtil.processDataSetName(any(),any(),any())).thenReturn("derivedValue");
		doNothing().when(configAndUpdateRestUtilPd).process3PAUcoIdFromLookup(anyMap());
		Map<String,Map<String,String>> result=new TreeMap<>();	
		Map<String,String> filedDataMap= new HashMap<>();
		filedDataMap.put("rateGroup", "OEM_Port");
		filedDataMap.put("priceType", "PORT_MAC");
		result.put("OEMMC",filedDataMap);
		Mockito.when(configAndUpdateRestUtilPd.createDataMapByUsocId(any(),anyMap(),anyString())).thenReturn(result);
		pedSnsdServiceUtilTest.generateConsolidationKey("ASENoD",design , nxDesignDetails,"576558");
	}

	@Test
	public void testappendDesignAndConsolidationData() {
		String result=pedSnsdServiceUtilTest.appendDesignAndConsolidationData("{\"data1\":\"A\",\"data2\":\"B\"}",
				"{\"ckey\":\"key1\"}");
		assertEquals("{\"data1\":\"A\",\"data2\":\"B\",\"ckey\":\"key1\"}", result);
	}
	
	@Test
	public void testSaveDBASENoD() throws IOException {
		NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
		String userId = "userId";
		String userFirstName="userfirstName";
		String userLastName="userLastName";
		String offerName="ASENoD";
		String asenodIRjson = "{ \"nxSiteId\": 459094, \"siteId\": 99988917977, \"npanxx\": \"843577\", \"address1\": \"230 KING ST\", \"city\": \"CHARLESTON\", \"state\": \"SC\", \"thirdPartyInd\": \"N\"}";
		ObjectMapper mapper = new ObjectMapper();
		JsonNode design = mapper.readTree(asenodIRjson);
		String asrItemId="R00002034839";
		Map<String, Object> paramMap = new HashMap<>();
		ObjectNode originalDesign=(ObjectNode)design;
		Mockito.when( nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(null);
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,"N",
				"Y",offerName,design,asrItemId,paramMap,originalDesign,true,null,null,null,null, null,null);
		
		String asenod3PAjson = "{ \"nxSiteId\": 459094, \"siteId\": 99988917977, \"npanxx\": \"843577\", \"address1\": \"230 KING ST\", \"city\": \"CHARLESTON\", \"state\": \"SC\", \"thirdPartyInd\": \"Y\"}";
		JsonNode design2 = mapper.readTree(asenod3PAjson);
		ObjectNode originalDesign2=(ObjectNode)design2;
		pedSnsdServiceUtilTest.saveDB(nxSolutionDetail,userId,userFirstName,userLastName,"U",
				"Y",offerName,design2,asrItemId,paramMap,originalDesign2,true,null,null,null,null, null,null);
	}

	@Test
	public void testASENoDSaveDesignDataRestV2() throws IOException {
		try {
			NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
			nxSolutionDetail.setRestVersion(StringConstants.VERSION_2);
			CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
			createTransactionResponse.setNxTransacId(101l);
			Map<String , Object> paramMap = new HashMap<String , Object>();
			JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequestAseod);
			Mockito.when(mapper.valueToTree(retreiveICBPSPRequestAseod)).thenReturn(dppTree);
			String offerName = "ASENoD";
			Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
			NxDesign nxDesign = new NxDesign();
			Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
			paramMap.put(StringConstants.TRANSACTION_TYPE, StringConstants.TRANSACTION_TYPE_EXISTING);	
			Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
			List<Object> asrIds = new ArrayList<>();
			Mockito.when(jsonPathUtil.search(any(), anyString(), any())).thenReturn(asrIds);
			List<Object[]> mpSolutionIdAndDesignIds = new ArrayList<Object[]>();
			String[] strArray = {"20"};
			mpSolutionIdAndDesignIds.add(strArray);
			Mockito.when(nxDesignRepository.fetchMpsolutionIdForSolution(anyLong(), anyList(), anyLong())).thenReturn(mpSolutionIdAndDesignIds);
			List<Long> nxDesignIds = new ArrayList<>();
			nxDesignIds.add(1l);
			Mockito.when(nxMpDesignDocumentRepository.findNxDesignIdByNxTxnIdAndMpSolutionId(anyLong(), anyList())).thenReturn(nxDesignIds);
			Mockito.when(processPDtoMPRestUtil.removeTransactionByMpsolutionid(anyMap())).thenReturn(true);
			List<Object[]> consolidationCriteriaList = new ArrayList<>();
			String[] strArray1 = {"aseod$New"};
			consolidationCriteriaList.add(strArray1);
			Mockito.when(nxDesignDetailsRepository.findConsolidationCriteriaByNxSolutionIdAndAsr(anyLong(), anyList())).thenReturn(consolidationCriteriaList);
			
			Mockito.when(nxDesignRepository.fetchNxDesignForSolution(anyLong(), anyList(), anyString())).thenReturn(nxDesignList);
			pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequestAseod, nxSolutionDetail, createTransactionResponse, paramMap);
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
	
	@Test
	public void testEplswanSaveDesignDataRestV2() throws IOException {
		try {
			NxSolutionDetail nxSolutionDetail = new NxSolutionDetail();
			nxSolutionDetail.setRestVersion(StringConstants.VERSION_2);
			Mockito.when(pedSnsdServiceUtilTest.getRestVersion("EPLSWAN")).thenReturn(StringConstants.VERSION_2);
			
			CreateTransactionResponse createTransactionResponse = new CreateTransactionResponse();
			createTransactionResponse.setNxTransacId(101l);
			Map<String , Object> paramMap = new HashMap<String , Object>();
			JsonNode dppTree = realMapper.valueToTree(retreiveICBPSPRequestAseod);
			Mockito.when(mapper.valueToTree(retreiveICBPSPRequestAseod)).thenReturn(dppTree);
			String offerName = "EPLSWAN";
			Mockito.when(salesMsDao.getOfferNameByOfferId(anyInt())).thenReturn(offerName);
			NxDesign nxDesign = new NxDesign();
			Mockito.when(nxDesignRepository.findByAsrItemIdAndNxSolutionDetail(anyString(), any())).thenReturn(nxDesign);
			paramMap.put(StringConstants.TRANSACTION_TYPE, StringConstants.TRANSACTION_TYPE_EXISTING);	
			Mockito.when(processPDtoMPRestUtil.isRESTEnabled(Mockito.anyString(),Mockito.anyString())).thenReturn(true);
			List<Object> asrIds = new ArrayList<>();
			Mockito.when(jsonPathUtil.search(any(), anyString(), any())).thenReturn(asrIds);
			List<Object[]> mpSolutionIdAndDesignIds = new ArrayList<>();
			Object[] obj=null;
			mpSolutionIdAndDesignIds.add(obj);
			Mockito.when(nxDesignRepository.fetchMpsolutionIdForSolution(anyLong(), anyList(), anyLong())).thenReturn(mpSolutionIdAndDesignIds);
			List<Long> nxDesignIds = new ArrayList<>();
			nxDesignIds.add(1l);
			Mockito.when(nxMpDesignDocumentRepository.findNxDesignIdByNxTxnIdAndMpSolutionId(anyLong(), anyList())).thenReturn(nxDesignIds);
			Mockito.when(processPDtoMPRestUtil.removeTransactionByMpsolutionid(anyMap())).thenReturn(true);
			List<Object[]> consolidationCriteriaList = new ArrayList<>();
			Object[] obj1=null;
			consolidationCriteriaList.add(obj1);
			Mockito.when(nxDesignDetailsRepository.findConsolidationCriteriaByNxSolutionIdAndAsr(anyLong(), anyList())).thenReturn(consolidationCriteriaList);
			
			Mockito.when(nxDesignRepository.fetchNxDesignForSolution(anyLong(), anyList(), anyString())).thenReturn(nxDesignList);
			pedSnsdServiceUtilTest.saveDesignData(retreiveICBPSPRequestAseod, nxSolutionDetail, createTransactionResponse, paramMap);
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
